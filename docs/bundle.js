(()=>{"use strict";const e=(e,t)=>`${e}=${encodeURIComponent(t)}`,t=e=>e.toISOString().replace(/-|:|\.\d+/g,""),n=(n,r={isAllday:!0,start:new Date})=>{if(r.isAllday){const a=t(r.start).replace(/T.*$/,"");return e(n,`${a}/${a}`)}const a=t(r.start),o=t(r.end);return e(n,`${a}/${o}`)},r=(e,t)=>({hour:e.hour+t.hour,minute:e.minute+t.minute}),a=(e,t)=>new Date(e.setHours(t.hour,t.minute)),o=e=>{const t=(e=>{const t=(e=>e.replace(/[０-９]/g,(e=>String.fromCharCode(e.charCodeAt(0)-65248))))(e).replace(/\s/g,"");return Array.from(t.matchAll(/(?:(?<year>\d{1,4}[\/年])?\s*(?<date>\d{1,2}(?:[\/-]\d{1,2}|\s?[\/月]\s?\d{1,2}日?)))/g)).map((e=>{const t=e.groups?.year?(e=>e<100?e+100*Math.floor((new Date).getFullYear()/100):e)(parseInt(e.groups.year.replace(/[\/年]/g,""))):(new Date).getFullYear(),n=e.groups?.date.replace(/\s|月/g,"/").replace(/[\/年]/g,"-").replace(/日/g,"");return new Date(`${t}-${n}`)})).filter((e=>!(e=>Number.isNaN(e.getTime()))(e)))})(e),n=(e=>Array.from(e.matchAll(/(?<hour>\d{1,2})[:：時](?<minute>\d{2})?(?!間)/g)).map((e=>({hour:parseInt(e.groups?.hour??"0"),minute:parseInt(e.groups?.minute??"0")}))))(e);if(0===t.length)return{isAllday:!0,start:new Date};if(0===n.length)return{isAllday:!0,start:t[0]};const o=a(t[0],n[0]),s=t.length>1&&t[1].getTime()>t[0].getTime()?t[1]:t[0],i=(e=>{const t=e.match(/(?<hour>\d{1,2})時間(?<minute>(半|\d{1,2}分))?/);if(t&&t.groups?.hour)return{hour:parseInt(t.groups.hour),minute:"半"===t.groups?.minute?30:parseInt(t.groups?.minute??"0")}})(e),l=i?r(n[0],i):n.length>1?n[1]:r(n[0],{hour:1,minute:0});return{isAllday:!1,start:o,end:a(s,l)}},s=e=>{const{text:t,details:n}=(e=>{const t=e.split("\n");return{text:t[0],details:t.slice(1).join("\n")}})(e),r=o(e),a=(e=>{const t=[/https:\/\/(?:[a-zA-Z0-9-]+\.)?zoom\.us\/j\/[a-zA-Z0-9]+(?:\?pwd=[a-zA-Z0-9]+)?/,/https:\/\/meet\.google\.com\/[a-zA-Z0-9]{3}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{3}(?:\?[-a-zA-Z0-9=&]+)?/];for(const n of t){const t=e.match(n);if(t)return t[0]}})(e);return{text:t,details:n,dates:r,location:a}},i=e=>{const t=`${e.getFullYear()}/${e.getMonth()+1}/${e.getDate()}`,n=e.getMinutes().toString().padStart(2,"0");return`${t} ${e.getHours()}:${n}`};let l,c=s("");document?.getElementById("eventDetails")?.addEventListener("paste",(async()=>{const e=document.getElementById("useHtml")?.checked??!1;l=e?await(async()=>{try{const e=await navigator.clipboard.read();for(const t of e)if(t.types.includes("text/html")){const e=await t.getType("text/html");return await e.text()}return}catch(e){return void console.error(e)}})():void 0,l=l?(e=>{const t=(new DOMParser).parseFromString(e,"text/html");return t.querySelectorAll("[style]").forEach((e=>{e.removeAttribute("style")})),t.documentElement.innerHTML})(l):void 0;const t=document.getElementById("eventDetails"),n=new Event("input",{bubbles:!0});t.dispatchEvent(n)})),document?.getElementById("eventDetails")?.addEventListener("input",(()=>{const e=document.getElementById("eventDetails")?.value,t=l?e.split("\n")[0]+"\n"+l:e;c=s(t),(e=>{if(document.getElementById("previewTitle").innerText=e.text,document.getElementById("previewDescription").innerHTML=(e=>{const t=(new DOMParser).parseFromString(e,"text/html");return t.querySelectorAll("script").forEach((e=>{e.remove()})),t.documentElement.innerHTML})(e.details),document.getElementById("previewLocation").innerText=e.location??"",!e.dates)return;const t=e.dates.isAllday?e.dates.start.toLocaleDateString():i(e.dates.start)+" - "+i(e.dates.end);document.getElementById("previewDate").innerText=t})(c)})),document?.getElementById("generateLink")?.addEventListener("click",(()=>{const t=`https://calendar.google.com/calendar/render?action=TEMPLATE&${[e("text",(r=c).text),e("details",r.details),n("dates",r.dates),r.location?e("location",r.location):void 0].filter((e=>void 0!==e)).join("&")}`;var r;window.open(t,"_blank")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJtQkFJTyxNQ2dCREEsRUFBa0IsQ0FBQ0MsRUFBYUMsSUFDN0IsR0FBR0QsS0FBT0UsbUJBQW1CRCxLQUdoQ0UsRUFBaUJDLEdBQ2RBLEVBQUtDLGNBQWNDLFFBQVEsYUFBYyxJQUc1Q0MsRUFBc0IsQ0FDMUJQLEVBQ0FRLEVBQXlCLENBQ3ZCQyxVQUFVLEVBQ1ZDLE1BQU8sSUFBSUMsU0FHYixHQUFHSCxFQUFXQyxTQUFTLENBQ3JCLE1BQU1HLEVBQU9ULEVBQWNLLEVBQVdFLE9BQU9KLFFBQVEsT0FBUSxJQUM3RCxPQUFPUCxFQUFnQkMsRUFBSyxHQUFHWSxLQUFRQSxJQUN6QyxDQUVBLE1BQU1GLEVBQVFQLEVBQWNLLEVBQVdFLE9BQ2pDRyxFQUFNVixFQUFjSyxFQUFXSyxLQUNyQyxPQUFPZCxFQUFnQkMsRUFBSyxHQUFHVSxLQUFTRyxJQUFNLEVDK0IxQ0MsRUFBVSxDQUFDQyxFQUFTQyxLQUNqQixDQUNMQyxLQUFNRixFQUFFRSxLQUFPRCxFQUFFQyxLQUNqQkMsT0FBUUgsRUFBRUcsT0FBU0YsRUFBRUUsU0FJbkJDLEVBQWdCLENBQUNmLEVBQVlRLElBQzFCLElBQUlELEtBQUtQLEVBQUtnQixTQUFTUixFQUFLSyxLQUFNTCxFQUFLTSxTQUduQ0csRUFBMkJDLElBQ3RDLE1BQU1DLEVBakVtQixDQUFDRCxJQUMxQixNQUFNRSxFQW5CdUIsQ0FBQ0YsR0FDdkJBLEVBQUtoQixRQUFRLFVBQVdtQixHQUN0QkMsT0FBT0MsYUFBYUYsRUFBRUcsV0FBVyxHQUFLLFNBaUJ4QkMsQ0FBdUJQLEdBQU1oQixRQUFRLE1BQU8sSUFnQm5FLE9BYmdCd0IsTUFBTUMsS0FBS1AsRUFBZVEsU0FEeEMsd0ZBR29CQyxLQUFLQyxJQUN6QixNQUFNQyxFQUFPRCxFQUFNRSxRQUFRRCxLQW5CVCxDQUFDQSxHQUNqQkEsRUFBTyxJQUVGQSxFQUQ2RCxJQUE3Q0UsS0FBS0MsT0FBTSxJQUFJM0IsTUFBTzRCLGNBQWdCLEtBR3hESixFQWVESyxDQUFjQyxTQUFTUCxFQUFNRSxPQUFPRCxLQUFLN0IsUUFBUSxTQUFVLE9BQzNELElBQUlLLE1BQU80QixjQUNUbkMsRUFBTzhCLEVBQU1FLFFBQVFoQyxLQUN4QkUsUUFBUSxRQUFTLEtBQ2pCQSxRQUFRLFNBQVUsS0FDbEJBLFFBQVEsS0FBTSxJQUNqQixPQUFPLElBQUlLLEtBQUssR0FBR3dCLEtBQVEvQixJQUFPLElBR3ZCc0MsUUFBUXRDLElBckJELENBQUNBLEdBQ2R1QyxPQUFPQyxNQUFNeEMsRUFBS3lDLFdBb0JNQyxDQUFjMUMsSUFBTSxFQWdEL0IyQyxDQUFtQnpCLEdBQ2pDMEIsRUF6Q2EsQ0FBQzFCLEdBRUpRLE1BQU1DLEtBQUtULEVBQUtVLFNBRGQsaURBR0lDLEtBQUtDLElBQ2xCLENBQ0xqQixLQUFNd0IsU0FBU1AsRUFBTUUsUUFBUW5CLE1BQVEsS0FDckNDLE9BQVF1QixTQUFTUCxFQUFNRSxRQUFRbEIsUUFBVSxTQWtDL0IrQixDQUFhM0IsR0FFM0IsR0FBMkIsSUFBdkJDLEVBQVkyQixPQUNkLE1BQU8sQ0FDTHpDLFVBQVUsRUFDVkMsTUFBTyxJQUFJQyxNQUlmLEdBQXFCLElBQWpCcUMsRUFBTUUsT0FDUixNQUFPLENBQ0x6QyxVQUFVLEVBQ1ZDLE1BQU9hLEVBQVksSUFLdkIsTUFBTWIsRUFBUVMsRUFBY0ksRUFBWSxHQUFJeUIsRUFBTSxJQUk1Q0csRUFDSjVCLEVBQVkyQixPQUFTLEdBQUszQixFQUFZLEdBQUdzQixVQUFZdEIsRUFBWSxHQUFHc0IsVUFDaEV0QixFQUFZLEdBQ1pBLEVBQVksR0FJWjZCLEVBdkRjLENBQUM5QixJQUNyQixNQUNNWSxFQUFRWixFQUFLWSxNQURELDhDQUdsQixHQUFLQSxHQUFVQSxFQUFNRSxRQUFRbkIsS0FPN0IsTUFBTyxDQUFFQSxLQUhJd0IsU0FBU1AsRUFBTUUsT0FBT25CLE1BR3BCQyxPQURZLE1BQXpCZ0IsRUFBTUUsUUFBUWxCLE9BQWlCLEdBQUt1QixTQUFTUCxFQUFNRSxRQUFRbEIsUUFBVSxLQUNoRCxFQTRDTG1DLENBQWMvQixHQUMxQmdDLEVBQWdCRixFQUNsQnRDLEVBQVFrQyxFQUFNLEdBQUlJLEdBQ2xCSixFQUFNRSxPQUFTLEVBQ2ZGLEVBQU0sR0FDTmxDLEVBQVFrQyxFQUFNLEdBQUksQ0FBRS9CLEtBQU0sRUFBR0MsT0FBUSxJQUd6QyxNQUFPLENBQ0xULFVBQVUsRUFDVkMsUUFDQUcsSUFMVU0sRUFBY2dDLEVBQWVHLEdBTXhDLEVDM0dVQyxFQUFpQ0MsSUFDNUMsTUFBTSxLQUFFbEMsRUFBSSxRQUFFbUMsR0Fab0IsQ0FDbENuQyxJQUVBLE1BQU1vQyxFQUFRcEMsRUFBS3FDLE1BQU0sTUFFekIsTUFBTyxDQUNMckMsS0FBTW9DLEVBQU0sR0FDWkQsUUFBU0MsRUFBTUUsTUFBTSxHQUFHQyxLQUFLLE1BQzlCLEVBSXlCQyxDQUE0Qk4sR0FDaERPLEVBQW9CMUMsRUFBd0JtQyxHQUM1Q1EsRUN0QnlCLENBQUMxQyxJQUNoQyxNQUFNMkMsRUFBVyxDQUNmLGlGQUNBLG1HQUdGLElBQUssTUFBTUMsS0FBU0QsRUFBVSxDQUM1QixNQUFNL0IsRUFBUVosRUFBS1ksTUFBTWdDLEdBQ3pCLEdBQUloQyxFQUNGLE9BQU9BLEVBQU0sRUFFakIsQ0FFZ0IsRURTR2lDLENBQWtCWCxHQUVyQyxNQUFPLENBQ0xsQyxPQUNBbUMsVUFDQU0sUUFDQUssU0FBVUosRUFDWCxFRTdCVUssRUFBMkJqRSxJQUN0QyxNQUFNa0UsRUFBVSxHQUFHbEUsRUFBS21DLGlCQUFpQm5DLEVBQUttRSxXQUFhLEtBQUtuRSxFQUFLb0UsWUFDL0RDLEVBQVlyRSxFQUFLc0UsYUFBYUMsV0FBV0MsU0FBUyxFQUFHLEtBRTNELE1BQU8sR0FBR04sS0FEU2xFLEVBQUt5RSxjQUFjSixHQUNSLEVDRWhDLElBQ0lLLEVBREFDLEVBQWN4QixFQUE4QixJQUdoRHlCLFVBQVVDLGVBQWUsaUJBQWlCQyxpQkFBaUIsU0FBU0MsVUFDbEUsTUFBTUMsRUFDSEosU0FBU0MsZUFBZSxZQUFpQ0ksVUFBVyxFQUN2RVAsRUFBZ0JNLE9OUmNELFdBQzlCLElBQ0UsTUFBTUcsUUFBdUJDLFVBQVVDLFVBQVVDLE9BRWpELElBQUssTUFBTUMsS0FBUUosRUFDakIsR0FBSUksRUFBS0MsTUFBTUMsU0FBUyxhQUFjLENBQ3BDLE1BQU1DLFFBQWFILEVBQUtJLFFBQVEsYUFFaEMsYUFEdUJELEVBQUt2RSxNQUU5QixDQUdGLE1BQ0YsQ0FBRSxNQUFPeUUsR0FFUCxZQURBQyxRQUFRQyxNQUFNRixFQUVoQixHTVJnQ0csUUFBcUJDLEVBQ3JEckIsRUFBZ0JBLEVDSXNCLENBQUNzQixJQUN2QyxNQUNNQyxHQURTLElBQUlDLFdBQ0FDLGdCQUFnQkgsRUFBTSxhQU16QyxPQUpBQyxFQUFJRyxpQkFBaUIsV0FBV0MsU0FBU0MsSUFDdkNBLEVBQUlDLGdCQUFnQixRQUFRLElBR3ZCTixFQUFJTyxnQkFBZ0JDLFNBQVMsRURaSkMsQ0FBeUJoQyxRQUFpQnFCLEVBRzFFLE1BQU1ZLEVBQXNCL0IsU0FBU0MsZUFBZSxnQkFDOUMrQixFQUFhLElBQUlDLE1BQU0sUUFBUyxDQUFFQyxTQUFTLElBQ2pESCxFQUFvQkksY0FBY0gsRUFBVyxJQUcvQ2hDLFVBQVVDLGVBQWUsaUJBQWlCQyxpQkFBaUIsU0FBUyxLQUNsRSxNQUFNa0MsRUFBYXBDLFNBQVNDLGVBQWUsaUJBQ3ZDaEYsTUFFRXFCLEVBQU93RCxFQUNUc0MsRUFBVXpELE1BQU0sTUFBTSxHQUFLLEtBQU9tQixFQUNsQ3NDLEVBQ0pyQyxFQUFjeEIsRUFBOEJqQyxHRXJCcEIsQ0FBQ3lELElBT3pCLEdBTkFDLFNBQVNDLGVBQWUsZ0JBQWlCb0MsVUFBWXRDLEVBQVl6RCxLQUNqRTBELFNBQVNDLGVBQWUsc0JBQXVCNEIsVUROZCxDQUFDVCxJQUNsQyxNQUNNQyxHQURTLElBQUlDLFdBQ0FDLGdCQUFnQkgsRUFBTSxhQU16QyxPQUpBQyxFQUFJRyxpQkFBaUIsVUFBVUMsU0FBU0MsSUFDdENBLEVBQUlZLFFBQVEsSUFHUGpCLEVBQUlPLGdCQUFnQkMsU0FBUyxFQ0Z1QlUsQ0FDekR4QyxFQUFZdEIsU0FFZHVCLFNBQVNDLGVBQWUsbUJBQW9Cb0MsVUFBWXRDLEVBQVlYLFVBQVksSUFFM0VXLEVBQVloQixNQUNmLE9BSUYsTUFBTXlELEVBQVd6QyxFQUFZaEIsTUFBTXRELFNBQy9Cc0UsRUFBWWhCLE1BQU1yRCxNQUFNK0cscUJBQ3hCcEQsRUFBOEJVLEVBQVloQixNQUFNckQsT0FDaEQsTUFDQTJELEVBQThCVSxFQUFZaEIsTUFBTWxELEtBQ3BEbUUsU0FBU0MsZUFBZSxlQUFnQm9DLFVBQVlHLENBQzlDLEVGSU5FLENBQVczQyxFQUFZLElBR3pCQyxVQUFVQyxlQUFlLGlCQUFpQkMsaUJBQWlCLFNBQVMsS0FDbEUsTUFBTXlDLEVMb0JDLCtEQVBRLENBQ2I1SCxFQUFnQixRQUZ1QjZILEVLWkc3QyxHTGNaekQsTUFDOUJ2QixFQUFnQixVQUFXNkgsRUFBTW5FLFNBQ2pDbEQsRUFBb0IsUUFBU3FILEVBQU03RCxPQUNuQzZELEVBQU14RCxTQUFXckUsRUFBZ0IsV0FBWTZILEVBQU14RCxlQUFZK0IsR0FDL0R6RCxRQUFRbUYsUUFBb0IxQixJQUFWMEIsSUFFZWhFLEtBQUssT0FSQSxJQUFDK0QsRUtWekNFLE9BQU9DLEtBQUtKLEVBQVUsU0FBUyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGV4dC10by1jYWxlbmRhci1ldmVudC8uL3NyYy9saWIvY2xpcGJvYXJkLnRzIiwid2VicGFjazovL3RleHQtdG8tY2FsZW5kYXItZXZlbnQvLi9zcmMvZXZlbnQvZXZlbnQudHMiLCJ3ZWJwYWNrOi8vdGV4dC10by1jYWxlbmRhci1ldmVudC8uL3NyYy9ldmVudC9wYXJzZXIvZGF0ZXMudHMiLCJ3ZWJwYWNrOi8vdGV4dC10by1jYWxlbmRhci1ldmVudC8uL3NyYy9ldmVudC9wYXJzZXIvbWFpbi50cyIsIndlYnBhY2s6Ly90ZXh0LXRvLWNhbGVuZGFyLWV2ZW50Ly4vc3JjL2V2ZW50L3BhcnNlci9sb2NhdGlvbi50cyIsIndlYnBhY2s6Ly90ZXh0LXRvLWNhbGVuZGFyLWV2ZW50Ly4vc3JjL2xpYi9kYXRlLnRzIiwid2VicGFjazovL3RleHQtdG8tY2FsZW5kYXItZXZlbnQvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vdGV4dC10by1jYWxlbmRhci1ldmVudC8uL3NyYy9saWIvaHRtbC50cyIsIndlYnBhY2s6Ly90ZXh0LXRvLWNhbGVuZGFyLWV2ZW50Ly4vc3JjL2xpYi9wcmV2aWV3LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICog44Kv44Oq44OD44OX44Oc44O844OJ44Gr44GC44KLaHRtbOOCkuWPluW+l+OBmeOCi1xuICog5Y+W5b6X44Gn44GN44Gq44GE5aC05ZCI44GvdW5kZWZpbmVk44KS6L+U44GZXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRDbGlwYm9hcmRIVE1MID0gYXN5bmMgKCk6IFByb21pc2U8c3RyaW5nIHwgdW5kZWZpbmVkPiA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY2xpcGJvYXJkSXRlbXMgPSBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLnJlYWQoKTtcblxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBjbGlwYm9hcmRJdGVtcykge1xuICAgICAgaWYgKGl0ZW0udHlwZXMuaW5jbHVkZXMoJ3RleHQvaHRtbCcpKSB7XG4gICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBpdGVtLmdldFR5cGUoJ3RleHQvaHRtbCcpO1xuICAgICAgICBjb25zdCBodG1sVGV4dCA9IGF3YWl0IGJsb2IudGV4dCgpO1xuICAgICAgICByZXR1cm4gaHRtbFRleHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufTtcbiIsImltcG9ydCB7IEVWRU5UX1JPT1RfVVJMIH0gZnJvbSAnLi9jb25zdGFudCc7XG5cbmV4cG9ydCB0eXBlIEV2ZW50RGF0ZXMgPVxuICB8IHtcbiAgICAgIGlzQWxsZGF5OiBmYWxzZTtcbiAgICAgIHN0YXJ0OiBEYXRlO1xuICAgICAgZW5kOiBEYXRlO1xuICAgIH1cbiAgfCB7XG4gICAgICBpc0FsbGRheTogdHJ1ZTtcbiAgICAgIHN0YXJ0OiBEYXRlO1xuICAgIH07XG5cbmV4cG9ydCB0eXBlIEdvb2dsZUNhbGVuZGFyRXZlbnQgPSB7XG4gIHRleHQ6IHN0cmluZztcbiAgZGV0YWlsczogc3RyaW5nO1xuICBkYXRlcz86IEV2ZW50RGF0ZXM7XG4gIGxvY2F0aW9uPzogc3RyaW5nO1xufTtcblxuY29uc3QgcGFyYW1Ub1VSTFBhcmFtID0gKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIGAke2tleX09JHtlbmNvZGVVUklDb21wb25lbnQodmFsdWUpfWA7XG59O1xuXG5jb25zdCBkYXRlVG9SRkM1NTQ1ID0gKGRhdGU6IERhdGUpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gZGF0ZS50b0lTT1N0cmluZygpLnJlcGxhY2UoLy18OnxcXC5cXGQrL2csICcnKTtcbn07XG5cbmNvbnN0IGRhdGVQYXJhbVRvVVJMUGFyYW0gPSAoXG4gIGtleTogc3RyaW5nLFxuICBldmVudERhdGVzOiBFdmVudERhdGVzID0ge1xuICAgIGlzQWxsZGF5OiB0cnVlLFxuICAgIHN0YXJ0OiBuZXcgRGF0ZSgpLFxuICB9XG4pOiBzdHJpbmcgPT4ge1xuICBpZihldmVudERhdGVzLmlzQWxsZGF5KXtcbiAgICBjb25zdCB0aW1lID0gZGF0ZVRvUkZDNTU0NShldmVudERhdGVzLnN0YXJ0KS5yZXBsYWNlKC9ULiokLywgJycpO1xuICAgIHJldHVybiBwYXJhbVRvVVJMUGFyYW0oa2V5LCBgJHt0aW1lfS8ke3RpbWV9YCk7XG4gIH1cblxuICBjb25zdCBzdGFydCA9IGRhdGVUb1JGQzU1NDUoZXZlbnREYXRlcy5zdGFydCk7XG4gIGNvbnN0IGVuZCA9IGRhdGVUb1JGQzU1NDUoZXZlbnREYXRlcy5lbmQpO1xuICByZXR1cm4gcGFyYW1Ub1VSTFBhcmFtKGtleSwgYCR7c3RhcnR9LyR7ZW5kfWApO1xufTtcblxuZXhwb3J0IGNvbnN0IG1ha2VHb29nbGVDYWxlbmRhckV2ZW50VVJMID0gKGV2ZW50OiBHb29nbGVDYWxlbmRhckV2ZW50KTogc3RyaW5nID0+IHtcbiAgY29uc3QgcGFyYW1zID0gW1xuICAgIHBhcmFtVG9VUkxQYXJhbSgndGV4dCcsIGV2ZW50LnRleHQpLFxuICAgIHBhcmFtVG9VUkxQYXJhbSgnZGV0YWlscycsIGV2ZW50LmRldGFpbHMpLFxuICAgIGRhdGVQYXJhbVRvVVJMUGFyYW0oJ2RhdGVzJywgZXZlbnQuZGF0ZXMpLFxuICAgIGV2ZW50LmxvY2F0aW9uID8gcGFyYW1Ub1VSTFBhcmFtKCdsb2NhdGlvbicsIGV2ZW50LmxvY2F0aW9uKSA6IHVuZGVmaW5lZCxcbiAgXS5maWx0ZXIoKHBhcmFtKSA9PiBwYXJhbSAhPT0gdW5kZWZpbmVkKTtcblxuICByZXR1cm4gYCR7RVZFTlRfUk9PVF9VUkx9JiR7cGFyYW1zLmpvaW4oJyYnKX1gO1xufTtcbiIsImltcG9ydCB7IEV2ZW50RGF0ZXMgfSBmcm9tICcuLi9ldmVudCc7XG5cbmNvbnN0IHplbmtha3VEaWdpdHNUb0hhbmtha3UgPSAodGV4dDogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIHRleHQucmVwbGFjZSgvW++8kC3vvJldL2csIChzKSA9PiB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUocy5jaGFyQ29kZUF0KDApIC0gMHhmZWUwKTtcbiAgfSk7XG59O1xuXG5jb25zdCBub3JtYWxpemVZZWFyID0gKHllYXI6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGlmICh5ZWFyIDwgMTAwKSB7XG4gICAgY29uc3QgY3VycmVudENlbnR1cnkgPSBNYXRoLmZsb29yKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSAvIDEwMCkgKiAxMDA7XG4gICAgcmV0dXJuIHllYXIgKyBjdXJyZW50Q2VudHVyeTtcbiAgfVxuICByZXR1cm4geWVhcjtcbn07XG5cbmNvbnN0IGlzSW52YWxpZERhdGUgPSAoZGF0ZTogRGF0ZSk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGUuZ2V0VGltZSgpKTtcbn07XG5cbmNvbnN0IGZpbmRBbGxZZWFyQW5kRGF5cyA9ICh0ZXh0OiBzdHJpbmcpOiBEYXRlW10gPT4ge1xuICBjb25zdCBub3JtYWxpemVkVGV4dCA9IHplbmtha3VEaWdpdHNUb0hhbmtha3UodGV4dCkucmVwbGFjZSgvXFxzL2csICcnKTtcbiAgY29uc3QgZGF0ZVJlZ2V4ID1cbiAgICAvKD86KD88eWVhcj5cXGR7MSw0fVtcXC/lubRdKT9cXHMqKD88ZGF0ZT5cXGR7MSwyfSg/OltcXC8tXVxcZHsxLDJ9fFxccz9bXFwv5pyIXVxccz9cXGR7MSwyfeaXpT8pKSkvZztcbiAgY29uc3QgbWF0Y2hlcyA9IEFycmF5LmZyb20obm9ybWFsaXplZFRleHQubWF0Y2hBbGwoZGF0ZVJlZ2V4KSk7XG5cbiAgY29uc3QgZGF0ZXMgPSBtYXRjaGVzLm1hcCgobWF0Y2gpID0+IHtcbiAgICBjb25zdCB5ZWFyID0gbWF0Y2guZ3JvdXBzPy55ZWFyXG4gICAgICA/IG5vcm1hbGl6ZVllYXIocGFyc2VJbnQobWF0Y2guZ3JvdXBzLnllYXIucmVwbGFjZSgvW1xcL+W5tF0vZywgJycpKSlcbiAgICAgIDogbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xuICAgIGNvbnN0IGRhdGUgPSBtYXRjaC5ncm91cHM/LmRhdGVcbiAgICAgIC5yZXBsYWNlKC9cXHN85pyIL2csICcvJylcbiAgICAgIC5yZXBsYWNlKC9bXFwv5bm0XS9nLCAnLScpXG4gICAgICAucmVwbGFjZSgv5pelL2csICcnKTtcbiAgICByZXR1cm4gbmV3IERhdGUoYCR7eWVhcn0tJHtkYXRlfWApO1xuICB9KTtcblxuICByZXR1cm4gZGF0ZXMuZmlsdGVyKChkYXRlKSA9PiAhaXNJbnZhbGlkRGF0ZShkYXRlKSk7XG59O1xuXG50eXBlIFRpbWUgPSB7XG4gIGhvdXI6IG51bWJlcjtcbiAgbWludXRlOiBudW1iZXI7XG59O1xuXG5jb25zdCBmaW5kQWxsVGltZXMgPSAodGV4dDogc3RyaW5nKTogVGltZVtdID0+IHtcbiAgY29uc3QgdGltZVJlZ2V4ID0gLyg/PGhvdXI+XFxkezEsMn0pWzrvvJrmmYJdKD88bWludXRlPlxcZHsyfSk/KD8h6ZaTKS9nO1xuICBjb25zdCBtYXRjaGVzID0gQXJyYXkuZnJvbSh0ZXh0Lm1hdGNoQWxsKHRpbWVSZWdleCkpO1xuXG4gIGNvbnN0IHRpbWVzID0gbWF0Y2hlcy5tYXAoKG1hdGNoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGhvdXI6IHBhcnNlSW50KG1hdGNoLmdyb3Vwcz8uaG91ciA/PyAnMCcpLFxuICAgICAgbWludXRlOiBwYXJzZUludChtYXRjaC5ncm91cHM/Lm1pbnV0ZSA/PyAnMCcpLFxuICAgIH07XG4gIH0pO1xuXG4gIHJldHVybiB0aW1lcztcbn07XG5cbmNvbnN0IGZpbmRUaW1lUmFuZ2UgPSAodGV4dDogc3RyaW5nKTogVGltZSB8IHVuZGVmaW5lZCA9PiB7XG4gIGNvbnN0IHRpbWVSZWdleCA9IC8oPzxob3VyPlxcZHsxLDJ9KeaZgumWkyg/PG1pbnV0ZT4o5Y2KfFxcZHsxLDJ95YiGKSk/LztcbiAgY29uc3QgbWF0Y2ggPSB0ZXh0Lm1hdGNoKHRpbWVSZWdleCk7XG5cbiAgaWYgKCFtYXRjaCB8fCAhbWF0Y2guZ3JvdXBzPy5ob3VyKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgaG91ciA9IHBhcnNlSW50KG1hdGNoLmdyb3Vwcy5ob3VyKTtcbiAgY29uc3QgbWludXRlID1cbiAgICBtYXRjaC5ncm91cHM/Lm1pbnV0ZSA9PT0gJ+WNiicgPyAzMCA6IHBhcnNlSW50KG1hdGNoLmdyb3Vwcz8ubWludXRlID8/ICcwJyk7XG4gIHJldHVybiB7IGhvdXIsIG1pbnV0ZSB9O1xufTtcblxuY29uc3QgYWRkVGltZSA9ICh4OiBUaW1lLCB5OiBUaW1lKTogVGltZSA9PiB7XG4gIHJldHVybiB7XG4gICAgaG91cjogeC5ob3VyICsgeS5ob3VyLFxuICAgIG1pbnV0ZTogeC5taW51dGUgKyB5Lm1pbnV0ZSxcbiAgfTtcbn07XG5cbmNvbnN0IHNldFRpbWVUb0RhdGUgPSAoZGF0ZTogRGF0ZSwgdGltZTogVGltZSk6IERhdGUgPT4ge1xuICByZXR1cm4gbmV3IERhdGUoZGF0ZS5zZXRIb3Vycyh0aW1lLmhvdXIsIHRpbWUubWludXRlKSk7XG59O1xuXG5leHBvcnQgY29uc3QgZXh0cmFjdFN0YXJ0QW5kRW5kRGF0ZXMgPSAodGV4dDogc3RyaW5nKTogRXZlbnREYXRlcyA9PiB7XG4gIGNvbnN0IHllYXJBbmREYXlzID0gZmluZEFsbFllYXJBbmREYXlzKHRleHQpO1xuICBjb25zdCB0aW1lcyA9IGZpbmRBbGxUaW1lcyh0ZXh0KTtcblxuICBpZiAoeWVhckFuZERheXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzQWxsZGF5OiB0cnVlLFxuICAgICAgc3RhcnQ6IG5ldyBEYXRlKCksXG4gICAgfTtcbiAgfVxuXG4gIGlmICh0aW1lcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNBbGxkYXk6IHRydWUsXG4gICAgICBzdGFydDogeWVhckFuZERheXNbMF0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIHN0YXJ044Gu5pel5LuY44Gr5pmC5Yi744KS6Kit5a6aXG4gIGNvbnN0IHN0YXJ0ID0gc2V0VGltZVRvRGF0ZSh5ZWFyQW5kRGF5c1swXSwgdGltZXNbMF0pO1xuXG4gIC8vIGVuZOOBruaXpeS7mOOCkuaMh+WumuOAguaZguWIu+OBjOikh+aVsOOBguOCi+WgtOWQiOOBr++8kuOBpOebruOCkuOAgeOBquOBhOWgtOWQiOOBr++8keOBpOebru+8iHN0YXJ044Go5ZCM44GY77yJ44KS5L2/44GG44CCXG4gIC8vIOOBn+OBoOOBl+OAge+8kuOBpOebruOBruaXpeS7mOOBjO+8keOBpOebruOCiOOCiuWJjeOBruWgtOWQiOOBr++8keOBpOebruOCkuS9v+OBhuOAglxuICBjb25zdCBlbmRUYXJnZXREYXRlID1cbiAgICB5ZWFyQW5kRGF5cy5sZW5ndGggPiAxICYmIHllYXJBbmREYXlzWzFdLmdldFRpbWUoKSA+IHllYXJBbmREYXlzWzBdLmdldFRpbWUoKVxuICAgICAgPyB5ZWFyQW5kRGF5c1sxXVxuICAgICAgOiB5ZWFyQW5kRGF5c1swXTtcblxuICAvLyDmiYDopoHmmYLplpPjgYzmjIflrprjgZXjgozjgabjgYTjgovloLTlkIjjga/jgIFzdGFydOOBruaZguWIu+OBq+aJgOimgeaZgumWk+OCkuWKoOeul+OBl+OBpmVuZOOBruaZguWIu+OCkuioreWumlxuICAvLyDmjIflrprjgZXjgozjgabjgYTjgarjgYTloLTlkIjjga/jgIHvvJLjgaTnm67jga7mmYLliLvjgb7jgZ/jga9zdGFydOOBruaZguWIu+OBq++8keaZgumWk+OCkuWKoOeul+OBl+OBpmVuZOOBruaZguWIu+OCkuioreWumlxuICBjb25zdCB0aW1lUmFuZ2UgPSBmaW5kVGltZVJhbmdlKHRleHQpO1xuICBjb25zdCBlbmRUYXJnZXRUaW1lID0gdGltZVJhbmdlXG4gICAgPyBhZGRUaW1lKHRpbWVzWzBdLCB0aW1lUmFuZ2UpXG4gICAgOiB0aW1lcy5sZW5ndGggPiAxXG4gICAgPyB0aW1lc1sxXVxuICAgIDogYWRkVGltZSh0aW1lc1swXSwgeyBob3VyOiAxLCBtaW51dGU6IDAgfSk7XG4gIGNvbnN0IGVuZCA9IHNldFRpbWVUb0RhdGUoZW5kVGFyZ2V0RGF0ZSwgZW5kVGFyZ2V0VGltZSk7XG5cbiAgcmV0dXJuIHtcbiAgICBpc0FsbGRheTogZmFsc2UsXG4gICAgc3RhcnQsXG4gICAgZW5kLFxuICB9O1xufTtcbiIsImltcG9ydCB7IEV2ZW50RGF0ZXMsIEdvb2dsZUNhbGVuZGFyRXZlbnQsIG1ha2VHb29nbGVDYWxlbmRhckV2ZW50VVJMIH0gZnJvbSAnLi4vZXZlbnQnO1xuaW1wb3J0IHsgZXh0cmFjdFN0YXJ0QW5kRW5kRGF0ZXMgfSBmcm9tICcuL2RhdGVzJztcbmltcG9ydCB7IGV4dHJhY3RNZWV0aW5nVVJMIH0gZnJvbSAnLi9sb2NhdGlvbic7XG5cbi8qKlxuICogdGV4dOOBi+OCieOCpOODmeODs+ODiOOCv+OCpOODiOODq+OCkuaKveWHuuOBmeOCi+OAglxuICog5pyA5Yid44Gu6KGM44KS44Kk44OZ44Oz44OI44K/44Kk44OI44Or44Go44GX44Gm5omx44GG44CCXG4gKi9cbmNvbnN0IGV4dHJhY3RFdmVudFRpdGxlQW5kRGV0YWlscyA9IChcbiAgdGV4dDogc3RyaW5nXG4pOiBQaWNrPEdvb2dsZUNhbGVuZGFyRXZlbnQsICd0ZXh0JyB8ICdkZXRhaWxzJz4gPT4ge1xuICBjb25zdCBsaW5lcyA9IHRleHQuc3BsaXQoJ1xcbicpO1xuXG4gIHJldHVybiB7XG4gICAgdGV4dDogbGluZXNbMF0sXG4gICAgZGV0YWlsczogbGluZXMuc2xpY2UoMSkuam9pbignXFxuJyksXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgbWFrZUdvb2dsZUNhbGVuZGFyRXZlbnRQYXJhbXMgPSAocGxhaW5UZXh0OiBzdHJpbmcpOiBHb29nbGVDYWxlbmRhckV2ZW50ID0+IHtcbiAgY29uc3QgeyB0ZXh0LCBkZXRhaWxzIH0gPSBleHRyYWN0RXZlbnRUaXRsZUFuZERldGFpbHMocGxhaW5UZXh0KTtcbiAgY29uc3QgZGF0ZXM6IEV2ZW50RGF0ZXMgPSBleHRyYWN0U3RhcnRBbmRFbmREYXRlcyhwbGFpblRleHQpO1xuICBjb25zdCBtZWV0aW5nVVJMID0gZXh0cmFjdE1lZXRpbmdVUkwocGxhaW5UZXh0KTtcblxuICByZXR1cm4ge1xuICAgIHRleHQsXG4gICAgZGV0YWlscyxcbiAgICBkYXRlcyxcbiAgICBsb2NhdGlvbjogbWVldGluZ1VSTCxcbiAgfTtcbn07IiwiZXhwb3J0IGNvbnN0IGV4dHJhY3RNZWV0aW5nVVJMID0gKHRleHQ6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCA9PiB7XG4gIGNvbnN0IHVybFJlZ2V4ID0gW1xuICAgIC9odHRwczpcXC9cXC8oPzpbYS16QS1aMC05LV0rXFwuKT96b29tXFwudXNcXC9qXFwvW2EtekEtWjAtOV0rKD86XFw/cHdkPVthLXpBLVowLTldKyk/LywgLy8gWm9vbVxuICAgIC9odHRwczpcXC9cXC9tZWV0XFwuZ29vZ2xlXFwuY29tXFwvW2EtekEtWjAtOV17M30tW2EtekEtWjAtOV17NH0tW2EtekEtWjAtOV17M30oPzpcXD9bLWEtekEtWjAtOT0mXSspPy8sIC8vIEdvb2dsZSBNZWV0XG4gIF07XG5cbiAgZm9yIChjb25zdCByZWdleCBvZiB1cmxSZWdleCkge1xuICAgIGNvbnN0IG1hdGNoID0gdGV4dC5tYXRjaChyZWdleCk7XG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICByZXR1cm4gbWF0Y2hbMF07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG4iLCJleHBvcnQgY29uc3QgZm9ybWF0RGF0ZVRvRGF0ZUFuZFRpbWUgPSAoZGF0ZTogRGF0ZSk6IHN0cmluZyA9PiB7XG4gIGNvbnN0IGRhdGVTdHIgPSBgJHtkYXRlLmdldEZ1bGxZZWFyKCl9LyR7ZGF0ZS5nZXRNb250aCgpICsgMX0vJHtkYXRlLmdldERhdGUoKX1gO1xuICBjb25zdCBtaW51dGVTdHIgPSBkYXRlLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7XG4gIGNvbnN0IHRpbWVTdHIgPSBgJHtkYXRlLmdldEhvdXJzKCl9OiR7bWludXRlU3RyfWA7XG4gIHJldHVybiBgJHtkYXRlU3RyfSAke3RpbWVTdHJ9YDtcbn07XG4iLCJpbXBvcnQgeyBnZXRDbGlwYm9hcmRIVE1MIH0gZnJvbSAnLi9saWIvY2xpcGJvYXJkJztcbmltcG9ydCB7IG1ha2VHb29nbGVDYWxlbmRhckV2ZW50VVJMIH0gZnJvbSAnLi9ldmVudC9ldmVudCc7XG5pbXBvcnQgeyBtYWtlR29vZ2xlQ2FsZW5kYXJFdmVudFBhcmFtcyB9IGZyb20gJy4vZXZlbnQvcGFyc2VyL21haW4nO1xuaW1wb3J0IHsgc2V0UHJldmlldyB9IGZyb20gJy4vbGliL3ByZXZpZXcnO1xuaW1wb3J0IHsgcmVtb3ZlQWxsU3R5bGVBdHRyaWJ1dGVzIH0gZnJvbSAnLi9saWIvaHRtbCc7XG5cbmxldCBldmVudFBhcmFtcyA9IG1ha2VHb29nbGVDYWxlbmRhckV2ZW50UGFyYW1zKCcnKTtcbmxldCBjbGlwYm9hcmRIdG1sOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG5cbmRvY3VtZW50Py5nZXRFbGVtZW50QnlJZCgnZXZlbnREZXRhaWxzJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCB1c2VIdG1sID1cbiAgICAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZUh0bWwnKSBhcyBIVE1MSW5wdXRFbGVtZW50KT8uY2hlY2tlZCA/PyBmYWxzZTtcbiAgY2xpcGJvYXJkSHRtbCA9IHVzZUh0bWwgPyBhd2FpdCBnZXRDbGlwYm9hcmRIVE1MKCkgOiB1bmRlZmluZWQ7XG4gIGNsaXBib2FyZEh0bWwgPSBjbGlwYm9hcmRIdG1sID8gcmVtb3ZlQWxsU3R5bGVBdHRyaWJ1dGVzKGNsaXBib2FyZEh0bWwpIDogdW5kZWZpbmVkO1xuXG4gIC8vIFBhc3Rl44Kk44OZ44Oz44OI44Gu5Yem55CG44GM57WC44KP44Gj44Gf44KJ44CB5omL5YuV44GnaW5wdXTjgqTjg5njg7Pjg4jjgpLjg4jjg6rjgqzjg7zjgZnjgotcbiAgY29uc3QgZXZlbnREZXRhaWxzRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldmVudERldGFpbHMnKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50O1xuICBjb25zdCBpbnB1dEV2ZW50ID0gbmV3IEV2ZW50KCdpbnB1dCcsIHsgYnViYmxlczogdHJ1ZSB9KTtcbiAgZXZlbnREZXRhaWxzRWxlbWVudC5kaXNwYXRjaEV2ZW50KGlucHV0RXZlbnQpO1xufSk7XG5cbmRvY3VtZW50Py5nZXRFbGVtZW50QnlJZCgnZXZlbnREZXRhaWxzJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICBjb25zdCBpbnB1dFRleHQgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2ZW50RGV0YWlscycpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQpXG4gICAgPy52YWx1ZTtcblxuICBjb25zdCB0ZXh0ID0gY2xpcGJvYXJkSHRtbFxuICAgID8gaW5wdXRUZXh0LnNwbGl0KCdcXG4nKVswXSArICdcXG4nICsgY2xpcGJvYXJkSHRtbFxuICAgIDogaW5wdXRUZXh0O1xuICBldmVudFBhcmFtcyA9IG1ha2VHb29nbGVDYWxlbmRhckV2ZW50UGFyYW1zKHRleHQpO1xuICBzZXRQcmV2aWV3KGV2ZW50UGFyYW1zKTtcbn0pO1xuXG5kb2N1bWVudD8uZ2V0RWxlbWVudEJ5SWQoJ2dlbmVyYXRlTGluaycpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgY29uc3QgZXZlbnRVcmwgPSBtYWtlR29vZ2xlQ2FsZW5kYXJFdmVudFVSTChldmVudFBhcmFtcyk7XG5cbiAgd2luZG93Lm9wZW4oZXZlbnRVcmwsICdfYmxhbmsnKTtcbn0pO1xuIiwiLyoqXG4gKiBodG1s44OG44Kt44K544OI5YaF44GL44KJc2NyaXB044K/44Kw44KS5YWo44Gm5YmK6Zmk44GZ44KLXG4gKi9cbmV4cG9ydCBjb25zdCByZW1vdmVBbGxTY3JpcHRUYWdzID0gKGh0bWw6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIGNvbnN0IHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcbiAgY29uc3QgZG9jID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhodG1sLCAndGV4dC9odG1sJyk7XG5cbiAgZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NjcmlwdCcpLmZvckVhY2goKGVsZSkgPT4ge1xuICAgIGVsZS5yZW1vdmUoKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGRvYy5kb2N1bWVudEVsZW1lbnQuaW5uZXJIVE1MO1xufTtcblxuLyoqXG4gKiBodG1s44OG44Kt44K544OI5YaF44GL44KJc3R5bGXlsZ7mgKfjgpLlhajjgabliYrpmaTjgZnjgotcbiAqL1xuZXhwb3J0IGNvbnN0IHJlbW92ZUFsbFN0eWxlQXR0cmlidXRlcyA9IChodG1sOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICBjb25zdCBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7XG4gIGNvbnN0IGRvYyA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoaHRtbCwgJ3RleHQvaHRtbCcpO1xuXG4gIGRvYy5xdWVyeVNlbGVjdG9yQWxsKCdbc3R5bGVdJykuZm9yRWFjaCgoZWxlKSA9PiB7XG4gICAgZWxlLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGRvYy5kb2N1bWVudEVsZW1lbnQuaW5uZXJIVE1MO1xufTtcbiIsImltcG9ydCB7IEdvb2dsZUNhbGVuZGFyRXZlbnQgfSBmcm9tICcuLi9ldmVudC9ldmVudCc7XG5pbXBvcnQgeyBmb3JtYXREYXRlVG9EYXRlQW5kVGltZSBhcyBmb3JtYXREYXRlVG9EYXRlQW5kVGltZVN0cmluZyB9IGZyb20gJy4vZGF0ZSc7XG5pbXBvcnQgeyByZW1vdmVBbGxTY3JpcHRUYWdzIH0gZnJvbSAnLi9odG1sJztcblxuLyoqXG4gKiDlhaXlipvmg4XloLHjgpLjg5fjg6zjg5Pjg6Xjg7zjgavlj43mmKDjgZnjgotcbiAqL1xuZXhwb3J0IGNvbnN0IHNldFByZXZpZXcgPSAoZXZlbnRQYXJhbXM6IEdvb2dsZUNhbGVuZGFyRXZlbnQpOiB2b2lkID0+IHtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZXZpZXdUaXRsZScpIS5pbm5lclRleHQgPSBldmVudFBhcmFtcy50ZXh0O1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldmlld0Rlc2NyaXB0aW9uJykhLmlubmVySFRNTCA9IHJlbW92ZUFsbFNjcmlwdFRhZ3MoXG4gICAgZXZlbnRQYXJhbXMuZGV0YWlsc1xuICApO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldmlld0xvY2F0aW9uJykhLmlubmVyVGV4dCA9IGV2ZW50UGFyYW1zLmxvY2F0aW9uID8/ICcnO1xuXG4gIGlmICghZXZlbnRQYXJhbXMuZGF0ZXMpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyDntYLml6Xjga7loLTlkIjjga/ml6Xku5jjga7jgb/jgIHjgZ3jgozku6XlpJbjga/plovlp4vml6XmmYLjgajntYLkuobml6XmmYLjgpLooajnpLpcbiAgY29uc3QgZGF0ZVRleHQgPSBldmVudFBhcmFtcy5kYXRlcy5pc0FsbGRheVxuICAgID8gZXZlbnRQYXJhbXMuZGF0ZXMuc3RhcnQudG9Mb2NhbGVEYXRlU3RyaW5nKClcbiAgICA6IGZvcm1hdERhdGVUb0RhdGVBbmRUaW1lU3RyaW5nKGV2ZW50UGFyYW1zLmRhdGVzLnN0YXJ0KSArXG4gICAgICAnIC0gJyArXG4gICAgICBmb3JtYXREYXRlVG9EYXRlQW5kVGltZVN0cmluZyhldmVudFBhcmFtcy5kYXRlcy5lbmQpO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldmlld0RhdGUnKSEuaW5uZXJUZXh0ID0gZGF0ZVRleHQ7XG4gIHJldHVybjtcbn07XG4iXSwibmFtZXMiOlsicGFyYW1Ub1VSTFBhcmFtIiwia2V5IiwidmFsdWUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJkYXRlVG9SRkM1NTQ1IiwiZGF0ZSIsInRvSVNPU3RyaW5nIiwicmVwbGFjZSIsImRhdGVQYXJhbVRvVVJMUGFyYW0iLCJldmVudERhdGVzIiwiaXNBbGxkYXkiLCJzdGFydCIsIkRhdGUiLCJ0aW1lIiwiZW5kIiwiYWRkVGltZSIsIngiLCJ5IiwiaG91ciIsIm1pbnV0ZSIsInNldFRpbWVUb0RhdGUiLCJzZXRIb3VycyIsImV4dHJhY3RTdGFydEFuZEVuZERhdGVzIiwidGV4dCIsInllYXJBbmREYXlzIiwibm9ybWFsaXplZFRleHQiLCJzIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiY2hhckNvZGVBdCIsInplbmtha3VEaWdpdHNUb0hhbmtha3UiLCJBcnJheSIsImZyb20iLCJtYXRjaEFsbCIsIm1hcCIsIm1hdGNoIiwieWVhciIsImdyb3VwcyIsIk1hdGgiLCJmbG9vciIsImdldEZ1bGxZZWFyIiwibm9ybWFsaXplWWVhciIsInBhcnNlSW50IiwiZmlsdGVyIiwiTnVtYmVyIiwiaXNOYU4iLCJnZXRUaW1lIiwiaXNJbnZhbGlkRGF0ZSIsImZpbmRBbGxZZWFyQW5kRGF5cyIsInRpbWVzIiwiZmluZEFsbFRpbWVzIiwibGVuZ3RoIiwiZW5kVGFyZ2V0RGF0ZSIsInRpbWVSYW5nZSIsImZpbmRUaW1lUmFuZ2UiLCJlbmRUYXJnZXRUaW1lIiwibWFrZUdvb2dsZUNhbGVuZGFyRXZlbnRQYXJhbXMiLCJwbGFpblRleHQiLCJkZXRhaWxzIiwibGluZXMiLCJzcGxpdCIsInNsaWNlIiwiam9pbiIsImV4dHJhY3RFdmVudFRpdGxlQW5kRGV0YWlscyIsImRhdGVzIiwibWVldGluZ1VSTCIsInVybFJlZ2V4IiwicmVnZXgiLCJleHRyYWN0TWVldGluZ1VSTCIsImxvY2F0aW9uIiwiZm9ybWF0RGF0ZVRvRGF0ZUFuZFRpbWUiLCJkYXRlU3RyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwibWludXRlU3RyIiwiZ2V0TWludXRlcyIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJnZXRIb3VycyIsImNsaXBib2FyZEh0bWwiLCJldmVudFBhcmFtcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJhZGRFdmVudExpc3RlbmVyIiwiYXN5bmMiLCJ1c2VIdG1sIiwiY2hlY2tlZCIsImNsaXBib2FyZEl0ZW1zIiwibmF2aWdhdG9yIiwiY2xpcGJvYXJkIiwicmVhZCIsIml0ZW0iLCJ0eXBlcyIsImluY2x1ZGVzIiwiYmxvYiIsImdldFR5cGUiLCJlIiwiY29uc29sZSIsImVycm9yIiwiZ2V0Q2xpcGJvYXJkSFRNTCIsInVuZGVmaW5lZCIsImh0bWwiLCJkb2MiLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImVsZSIsInJlbW92ZUF0dHJpYnV0ZSIsImRvY3VtZW50RWxlbWVudCIsImlubmVySFRNTCIsInJlbW92ZUFsbFN0eWxlQXR0cmlidXRlcyIsImV2ZW50RGV0YWlsc0VsZW1lbnQiLCJpbnB1dEV2ZW50IiwiRXZlbnQiLCJidWJibGVzIiwiZGlzcGF0Y2hFdmVudCIsImlucHV0VGV4dCIsImlubmVyVGV4dCIsInJlbW92ZSIsInJlbW92ZUFsbFNjcmlwdFRhZ3MiLCJkYXRlVGV4dCIsInRvTG9jYWxlRGF0ZVN0cmluZyIsInNldFByZXZpZXciLCJldmVudFVybCIsImV2ZW50IiwicGFyYW0iLCJ3aW5kb3ciLCJvcGVuIl0sInNvdXJjZVJvb3QiOiIifQ==