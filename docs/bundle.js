(()=>{"use strict";const t=(t,e)=>`${t}=${encodeURIComponent(e)}`,e=t=>t.toISOString().replace(/-|:|\.\d+/g,""),r=(r,n={isAllday:!0,start:new Date})=>{if(n.isAllday){const a=e(n.start).replace(/T.*$/,"");return t(r,`${a}/${a}`)}const a=e(n.start),o=e(n.end);return t(r,`${a}/${o}`)},n=(t,e)=>({hour:t.hour+e.hour,minute:t.minute+e.minute}),a=t=>{const e=(t=>{const e=(t=>t.replace(/[０-９]/g,(t=>String.fromCharCode(t.charCodeAt(0)-65248))))(t).replace(/\s/g,"");return Array.from(e.matchAll(/(?:(?<year>\d{1,4}[\/年])?\s*(?<date>\d{1,2}(?:[\/-]\d{1,2}|\s?[\/月]\s?\d{1,2}日?)))/g)).map((t=>{const e=t.groups?.year?(t=>t<100?t+100*Math.floor((new Date).getFullYear()/100):t)(parseInt(t.groups.year.replace(/[\/年]/g,""))):(new Date).getFullYear(),r=t.groups?.date.replace(/\s|月|日/g,"/").replace(/[\/年]/g,"-");return new Date(`${e}-${r}`)})).filter((t=>!(t=>Number.isNaN(t.getTime()))(t)))})(t),r=(t=>Array.from(t.matchAll(/(?<hour>\d{1,2})[:時](?<minute>\d{2})?(?!間)/g)).map((t=>({hour:parseInt(t.groups?.hour??"0"),minute:parseInt(t.groups?.minute??"0")}))))(t);if(0===e.length)return{isAllday:!0,start:new Date};if(0===r.length)return{isAllday:!0,start:e[0]};const a=new Date(e[0].setHours(r[0].hour,r[0].minute)),o=e.length>1&&e[1].getTime()>e[0].getTime()?e[1]:e[0],s=(t=>{const e=t.match(/(?<hour>\d{1,2})時間(?<minute>(半|\d{1,2}分))?/);if(e&&e.groups?.hour)return{hour:parseInt(e.groups.hour),minute:"半"===e.groups?.minute?30:parseInt(e.groups?.minute??"0")}})(t),u=s?n(r[0],s):r.length>1?r[1]:n(r[0],{hour:1,minute:0});return{isAllday:!1,start:a,end:new Date(o.setHours(u.hour,u.minute))}};document?.getElementById("generateLink")?.addEventListener("click",(function(){const e=document.getElementById("eventDetails")?.value,n=(t=>{const{text:e,details:r}=(t=>{const e=t.split("\n");return{text:e[0],details:e.slice(1).join("\n")}})(t),n=a(t),o=(t=>{const e=[/https:\/\/(?:[a-zA-Z0-9-]+\.)?zoom\.us\/j\/[a-zA-Z0-9]+(?:\?pwd=[a-zA-Z0-9]+)?/,/https:\/\/meet\.google\.com\/[a-zA-Z0-9]{3}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{3}(?:\?[-a-zA-Z0-9=&]+)?/];for(const r of e){const e=t.match(r);if(e)return e[0]}})(t);return{text:e,details:r,dates:n,location:o}})(e),o=`https://calendar.google.com/calendar/render?action=TEMPLATE&${[t("text",(s=n).text),t("details",s.details),r("dates",s.dates),s.location?t("location",s.location):void 0].filter((t=>void 0!==t)).join("&")}`;var s;window.open(o,"_blank")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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InNvdXJjZXMiOlsid2VicGFjazovL3RleHQtdG8tY2FsZW5kYXItZXZlbnQvLi9zcmMvZXZlbnQvY29uc3RhbnQudHMiLCJ3ZWJwYWNrOi8vdGV4dC10by1jYWxlbmRhci1ldmVudC8uL3NyYy9ldmVudC9ldmVudC50cyIsIndlYnBhY2s6Ly90ZXh0LXRvLWNhbGVuZGFyLWV2ZW50Ly4vc3JjL2V2ZW50L3BhcnNlci9kYXRlcy50cyIsIndlYnBhY2s6Ly90ZXh0LXRvLWNhbGVuZGFyLWV2ZW50Ly4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL3RleHQtdG8tY2FsZW5kYXItZXZlbnQvLi9zcmMvZXZlbnQvcGFyc2VyL21haW4udHMiLCJ3ZWJwYWNrOi8vdGV4dC10by1jYWxlbmRhci1ldmVudC8uL3NyYy9ldmVudC9wYXJzZXIvbG9jYXRpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IEVWRU5UX1JPT1RfVVJMID0gXCJodHRwczovL2NhbGVuZGFyLmdvb2dsZS5jb20vY2FsZW5kYXIvcmVuZGVyP2FjdGlvbj1URU1QTEFURVwiOyIsImltcG9ydCB7IEVWRU5UX1JPT1RfVVJMIH0gZnJvbSAnLi9jb25zdGFudCc7XG5cbmV4cG9ydCB0eXBlIEV2ZW50RGF0ZXMgPVxuICB8IHtcbiAgICAgIGlzQWxsZGF5OiBmYWxzZTtcbiAgICAgIHN0YXJ0OiBEYXRlO1xuICAgICAgZW5kOiBEYXRlO1xuICAgIH1cbiAgfCB7XG4gICAgICBpc0FsbGRheTogdHJ1ZTtcbiAgICAgIHN0YXJ0OiBEYXRlO1xuICAgIH07XG5cbmV4cG9ydCB0eXBlIEdvb2dsZUNhbGVuZGFyRXZlbnQgPSB7XG4gIHRleHQ6IHN0cmluZztcbiAgZGV0YWlsczogc3RyaW5nO1xuICBkYXRlcz86IEV2ZW50RGF0ZXM7XG4gIGxvY2F0aW9uPzogc3RyaW5nO1xufTtcblxuY29uc3QgcGFyYW1Ub1VSTFBhcmFtID0gKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIGAke2tleX09JHtlbmNvZGVVUklDb21wb25lbnQodmFsdWUpfWA7XG59O1xuXG5jb25zdCBkYXRlVG9SRkM1NTQ1ID0gKGRhdGU6IERhdGUpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gZGF0ZS50b0lTT1N0cmluZygpLnJlcGxhY2UoLy18OnxcXC5cXGQrL2csICcnKTtcbn07XG5cbmNvbnN0IGRhdGVQYXJhbVRvVVJMUGFyYW0gPSAoXG4gIGtleTogc3RyaW5nLFxuICBldmVudERhdGVzOiBFdmVudERhdGVzID0ge1xuICAgIGlzQWxsZGF5OiB0cnVlLFxuICAgIHN0YXJ0OiBuZXcgRGF0ZSgpLFxuICB9XG4pOiBzdHJpbmcgPT4ge1xuICBpZihldmVudERhdGVzLmlzQWxsZGF5KXtcbiAgICBjb25zdCB0aW1lID0gZGF0ZVRvUkZDNTU0NShldmVudERhdGVzLnN0YXJ0KS5yZXBsYWNlKC9ULiokLywgJycpO1xuICAgIHJldHVybiBwYXJhbVRvVVJMUGFyYW0oa2V5LCBgJHt0aW1lfS8ke3RpbWV9YCk7XG4gIH1cblxuICBjb25zdCBzdGFydCA9IGRhdGVUb1JGQzU1NDUoZXZlbnREYXRlcy5zdGFydCk7XG4gIGNvbnN0IGVuZCA9IGRhdGVUb1JGQzU1NDUoZXZlbnREYXRlcy5lbmQpO1xuICByZXR1cm4gcGFyYW1Ub1VSTFBhcmFtKGtleSwgYCR7c3RhcnR9LyR7ZW5kfWApO1xufTtcblxuZXhwb3J0IGNvbnN0IG1ha2VHb29nbGVDYWxlbmRhckV2ZW50VVJMID0gKGV2ZW50OiBHb29nbGVDYWxlbmRhckV2ZW50KTogc3RyaW5nID0+IHtcbiAgY29uc3QgcGFyYW1zID0gW1xuICAgIHBhcmFtVG9VUkxQYXJhbSgndGV4dCcsIGV2ZW50LnRleHQpLFxuICAgIHBhcmFtVG9VUkxQYXJhbSgnZGV0YWlscycsIGV2ZW50LmRldGFpbHMpLFxuICAgIGRhdGVQYXJhbVRvVVJMUGFyYW0oJ2RhdGVzJywgZXZlbnQuZGF0ZXMpLFxuICAgIGV2ZW50LmxvY2F0aW9uID8gcGFyYW1Ub1VSTFBhcmFtKCdsb2NhdGlvbicsIGV2ZW50LmxvY2F0aW9uKSA6IHVuZGVmaW5lZCxcbiAgXS5maWx0ZXIoKHBhcmFtKSA9PiBwYXJhbSAhPT0gdW5kZWZpbmVkKTtcblxuICByZXR1cm4gYCR7RVZFTlRfUk9PVF9VUkx9JiR7cGFyYW1zLmpvaW4oJyYnKX1gO1xufTtcbiIsImltcG9ydCB7IEV2ZW50RGF0ZXMgfSBmcm9tICcuLi9ldmVudCc7XG5cbmNvbnN0IHplbmtha3VEaWdpdHNUb0hhbmtha3UgPSAodGV4dDogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIHRleHQucmVwbGFjZSgvW++8kC3vvJldL2csIChzKSA9PiB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUocy5jaGFyQ29kZUF0KDApIC0gMHhmZWUwKTtcbiAgfSk7XG59O1xuXG5jb25zdCBub3JtYWxpemVZZWFyID0gKHllYXI6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGlmICh5ZWFyIDwgMTAwKSB7XG4gICAgY29uc3QgY3VycmVudENlbnR1cnkgPSBNYXRoLmZsb29yKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSAvIDEwMCkgKiAxMDA7XG4gICAgcmV0dXJuIHllYXIgKyBjdXJyZW50Q2VudHVyeTtcbiAgfVxuICByZXR1cm4geWVhcjtcbn07XG5cbmNvbnN0IGlzSW52YWxpZERhdGUgPSAoZGF0ZTogRGF0ZSk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGUuZ2V0VGltZSgpKTtcbn07XG5cbmNvbnN0IGZpbmRBbGxZZWFyQW5kRGF5cyA9ICh0ZXh0OiBzdHJpbmcpOiBEYXRlW10gPT4ge1xuICBjb25zdCBub3JtYWxpemVkVGV4dCA9IHplbmtha3VEaWdpdHNUb0hhbmtha3UodGV4dCkucmVwbGFjZSgvXFxzL2csICcnKTtcbiAgY29uc3QgZGF0ZVJlZ2V4ID1cbiAgICAvKD86KD88eWVhcj5cXGR7MSw0fVtcXC/lubRdKT9cXHMqKD88ZGF0ZT5cXGR7MSwyfSg/OltcXC8tXVxcZHsxLDJ9fFxccz9bXFwv5pyIXVxccz9cXGR7MSwyfeaXpT8pKSkvZztcbiAgY29uc3QgbWF0Y2hlcyA9IEFycmF5LmZyb20obm9ybWFsaXplZFRleHQubWF0Y2hBbGwoZGF0ZVJlZ2V4KSk7XG5cbiAgY29uc3QgZGF0ZXMgPSBtYXRjaGVzLm1hcCgobWF0Y2gpID0+IHtcbiAgICBjb25zdCB5ZWFyID0gbWF0Y2guZ3JvdXBzPy55ZWFyXG4gICAgICA/IG5vcm1hbGl6ZVllYXIocGFyc2VJbnQobWF0Y2guZ3JvdXBzLnllYXIucmVwbGFjZSgvW1xcL+W5tF0vZywgJycpKSlcbiAgICAgIDogbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xuICAgIGNvbnN0IGRhdGUgPSBtYXRjaC5ncm91cHM/LmRhdGUucmVwbGFjZSgvXFxzfOaciHzml6UvZywgJy8nKS5yZXBsYWNlKC9bXFwv5bm0XS9nLCAnLScpO1xuICAgIHJldHVybiBuZXcgRGF0ZShgJHt5ZWFyfS0ke2RhdGV9YCk7XG4gIH0pO1xuXG4gIHJldHVybiBkYXRlcy5maWx0ZXIoKGRhdGUpID0+ICFpc0ludmFsaWREYXRlKGRhdGUpKTtcbn07XG5cbnR5cGUgVGltZSA9IHtcbiAgaG91cjogbnVtYmVyO1xuICBtaW51dGU6IG51bWJlcjtcbn07XG5cbmNvbnN0IGZpbmRBbGxUaW1lcyA9ICh0ZXh0OiBzdHJpbmcpOiBUaW1lW10gPT4ge1xuICBjb25zdCB0aW1lUmVnZXggPSAvKD88aG91cj5cXGR7MSwyfSlbOuaZgl0oPzxtaW51dGU+XFxkezJ9KT8oPyHplpMpL2c7XG4gIGNvbnN0IG1hdGNoZXMgPSBBcnJheS5mcm9tKHRleHQubWF0Y2hBbGwodGltZVJlZ2V4KSk7XG5cbiAgY29uc3QgdGltZXMgPSBtYXRjaGVzLm1hcCgobWF0Y2gpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgaG91cjogcGFyc2VJbnQobWF0Y2guZ3JvdXBzPy5ob3VyID8/ICcwJyksXG4gICAgICBtaW51dGU6IHBhcnNlSW50KG1hdGNoLmdyb3Vwcz8ubWludXRlID8/ICcwJyksXG4gICAgfTtcbiAgfSk7XG5cbiAgcmV0dXJuIHRpbWVzO1xufTtcblxuY29uc3QgZmluZFRpbWVSYW5nZSA9ICh0ZXh0OiBzdHJpbmcpOiBUaW1lIHwgdW5kZWZpbmVkID0+IHtcbiAgY29uc3QgdGltZVJlZ2V4ID0gLyg/PGhvdXI+XFxkezEsMn0p5pmC6ZaTKD88bWludXRlPijljYp8XFxkezEsMn3liIYpKT8vO1xuICBjb25zdCBtYXRjaCA9IHRleHQubWF0Y2godGltZVJlZ2V4KTtcblxuICBpZiAoIW1hdGNoIHx8ICFtYXRjaC5ncm91cHM/LmhvdXIpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBob3VyID0gcGFyc2VJbnQobWF0Y2guZ3JvdXBzLmhvdXIpO1xuICBjb25zdCBtaW51dGUgPVxuICAgIG1hdGNoLmdyb3Vwcz8ubWludXRlID09PSAn5Y2KJyA/IDMwIDogcGFyc2VJbnQobWF0Y2guZ3JvdXBzPy5taW51dGUgPz8gJzAnKTtcbiAgcmV0dXJuIHsgaG91ciwgbWludXRlIH07XG59O1xuXG5jb25zdCBhZGRUaW1lID0gKHg6IFRpbWUsIHk6IFRpbWUpOiBUaW1lID0+IHtcbiAgcmV0dXJuIHtcbiAgICBob3VyOiB4LmhvdXIgKyB5LmhvdXIsXG4gICAgbWludXRlOiB4Lm1pbnV0ZSArIHkubWludXRlLFxuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGV4dHJhY3RTdGFydEFuZEVuZERhdGVzID0gKHRleHQ6IHN0cmluZyk6IEV2ZW50RGF0ZXMgPT4ge1xuICBjb25zdCB5ZWFyQW5kRGF5cyA9IGZpbmRBbGxZZWFyQW5kRGF5cyh0ZXh0KTtcbiAgY29uc3QgdGltZXMgPSBmaW5kQWxsVGltZXModGV4dCk7XG5cbiAgaWYgKHllYXJBbmREYXlzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiB7XG4gICAgICBpc0FsbGRheTogdHJ1ZSxcbiAgICAgIHN0YXJ0OiBuZXcgRGF0ZSgpLFxuICAgIH07XG4gIH1cblxuICBpZiAodGltZXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzQWxsZGF5OiB0cnVlLFxuICAgICAgc3RhcnQ6IHllYXJBbmREYXlzWzBdLFxuICAgIH07XG4gIH1cblxuICBjb25zdCBzdGFydCA9IG5ldyBEYXRlKHllYXJBbmREYXlzWzBdLnNldEhvdXJzKHRpbWVzWzBdLmhvdXIsIHRpbWVzWzBdLm1pbnV0ZSkpO1xuICBjb25zdCBlbmRUYXJnZXREYXRlID1cbiAgICB5ZWFyQW5kRGF5cy5sZW5ndGggPiAxICYmIHllYXJBbmREYXlzWzFdLmdldFRpbWUoKSA+IHllYXJBbmREYXlzWzBdLmdldFRpbWUoKVxuICAgICAgPyB5ZWFyQW5kRGF5c1sxXVxuICAgICAgOiB5ZWFyQW5kRGF5c1swXTtcbiAgY29uc3QgdGltZVJhbmdlID0gZmluZFRpbWVSYW5nZSh0ZXh0KTtcbiAgY29uc3QgZW5kVGFyZ2V0VGltZSA9IHRpbWVSYW5nZVxuICAgID8gYWRkVGltZSh0aW1lc1swXSwgdGltZVJhbmdlKVxuICAgIDogdGltZXMubGVuZ3RoID4gMVxuICAgID8gdGltZXNbMV1cbiAgICA6IGFkZFRpbWUodGltZXNbMF0sIHsgaG91cjogMSwgbWludXRlOiAwIH0pO1xuICBjb25zdCBlbmQgPSBuZXcgRGF0ZShlbmRUYXJnZXREYXRlLnNldEhvdXJzKGVuZFRhcmdldFRpbWUuaG91ciwgZW5kVGFyZ2V0VGltZS5taW51dGUpKTtcblxuICByZXR1cm4ge1xuICAgIGlzQWxsZGF5OiBmYWxzZSxcbiAgICBzdGFydCxcbiAgICBlbmQsXG4gIH07XG59O1xuIiwiaW1wb3J0IHsgbWFrZUdvb2dsZUNhbGVuZGFyRXZlbnRVUkwgfSBmcm9tIFwiLi9ldmVudC9ldmVudFwiXG5pbXBvcnQgeyBtYWtlR29vZ2xlQ2FsZW5kYXJFdmVudFBhcmFtcyB9IGZyb20gXCIuL2V2ZW50L3BhcnNlci9tYWluXCJcblxuXG5kb2N1bWVudD8uZ2V0RWxlbWVudEJ5SWQoJ2dlbmVyYXRlTGluaycpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgZXZlbnREZXRhaWxzID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldmVudERldGFpbHMnKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50KT8udmFsdWU7XG4gIGNvbnN0IGV2ZW50UGFyYW1zID0gbWFrZUdvb2dsZUNhbGVuZGFyRXZlbnRQYXJhbXMoZXZlbnREZXRhaWxzKTtcbiAgY29uc3QgZXZlbnRVcmwgPSBtYWtlR29vZ2xlQ2FsZW5kYXJFdmVudFVSTChldmVudFBhcmFtcyk7XG5cbiAgd2luZG93Lm9wZW4oZXZlbnRVcmwsICdfYmxhbmsnKTtcbn0pOyIsImltcG9ydCB7IEV2ZW50RGF0ZXMsIEdvb2dsZUNhbGVuZGFyRXZlbnQsIG1ha2VHb29nbGVDYWxlbmRhckV2ZW50VVJMIH0gZnJvbSAnLi4vZXZlbnQnO1xuaW1wb3J0IHsgZXh0cmFjdFN0YXJ0QW5kRW5kRGF0ZXMgfSBmcm9tICcuL2RhdGVzJztcbmltcG9ydCB7IGV4dHJhY3RNZWV0aW5nVVJMIH0gZnJvbSAnLi9sb2NhdGlvbic7XG5cbi8qKlxuICogdGV4dOOBi+OCieOCpOODmeODs+ODiOOCv+OCpOODiOODq+OCkuaKveWHuuOBmeOCi+OAglxuICog5pyA5Yid44Gu6KGM44KS44Kk44OZ44Oz44OI44K/44Kk44OI44Or44Go44GX44Gm5omx44GG44CCXG4gKi9cbmNvbnN0IGV4dHJhY3RFdmVudFRpdGxlQW5kRGV0YWlscyA9IChcbiAgdGV4dDogc3RyaW5nXG4pOiBQaWNrPEdvb2dsZUNhbGVuZGFyRXZlbnQsICd0ZXh0JyB8ICdkZXRhaWxzJz4gPT4ge1xuICBjb25zdCBsaW5lcyA9IHRleHQuc3BsaXQoJ1xcbicpO1xuXG4gIHJldHVybiB7XG4gICAgdGV4dDogbGluZXNbMF0sXG4gICAgZGV0YWlsczogbGluZXMuc2xpY2UoMSkuam9pbignXFxuJyksXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgbWFrZUdvb2dsZUNhbGVuZGFyRXZlbnRQYXJhbXMgPSAocGxhaW5UZXh0OiBzdHJpbmcpOiBHb29nbGVDYWxlbmRhckV2ZW50ID0+IHtcbiAgY29uc3QgeyB0ZXh0LCBkZXRhaWxzIH0gPSBleHRyYWN0RXZlbnRUaXRsZUFuZERldGFpbHMocGxhaW5UZXh0KTtcbiAgY29uc3QgZGF0ZXM6IEV2ZW50RGF0ZXMgPSBleHRyYWN0U3RhcnRBbmRFbmREYXRlcyhwbGFpblRleHQpO1xuICBjb25zdCBtZWV0aW5nVVJMID0gZXh0cmFjdE1lZXRpbmdVUkwocGxhaW5UZXh0KTtcblxuICByZXR1cm4ge1xuICAgIHRleHQsXG4gICAgZGV0YWlscyxcbiAgICBkYXRlcyxcbiAgICBsb2NhdGlvbjogbWVldGluZ1VSTCxcbiAgfTtcbn07IiwiZXhwb3J0IGNvbnN0IGV4dHJhY3RNZWV0aW5nVVJMID0gKHRleHQ6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCA9PiB7XG4gIGNvbnN0IHVybFJlZ2V4ID0gW1xuICAgIC9odHRwczpcXC9cXC8oPzpbYS16QS1aMC05LV0rXFwuKT96b29tXFwudXNcXC9qXFwvW2EtekEtWjAtOV0rKD86XFw/cHdkPVthLXpBLVowLTldKyk/LywgLy8gWm9vbVxuICAgIC9odHRwczpcXC9cXC9tZWV0XFwuZ29vZ2xlXFwuY29tXFwvW2EtekEtWjAtOV17M30tW2EtekEtWjAtOV17NH0tW2EtekEtWjAtOV17M30oPzpcXD9bLWEtekEtWjAtOT0mXSspPy8sIC8vIEdvb2dsZSBNZWV0XG4gIF07XG5cbiAgZm9yIChjb25zdCByZWdleCBvZiB1cmxSZWdleCkge1xuICAgIGNvbnN0IG1hdGNoID0gdGV4dC5tYXRjaChyZWdleCk7XG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICByZXR1cm4gbWF0Y2hbMF07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG4iXSwibmFtZXMiOlsicGFyYW1Ub1VSTFBhcmFtIiwia2V5IiwidmFsdWUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJkYXRlVG9SRkM1NTQ1IiwiZGF0ZSIsInRvSVNPU3RyaW5nIiwicmVwbGFjZSIsImRhdGVQYXJhbVRvVVJMUGFyYW0iLCJldmVudERhdGVzIiwiaXNBbGxkYXkiLCJzdGFydCIsIkRhdGUiLCJ0aW1lIiwiZW5kIiwiYWRkVGltZSIsIngiLCJ5IiwiaG91ciIsIm1pbnV0ZSIsImV4dHJhY3RTdGFydEFuZEVuZERhdGVzIiwidGV4dCIsInllYXJBbmREYXlzIiwibm9ybWFsaXplZFRleHQiLCJzIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiY2hhckNvZGVBdCIsInplbmtha3VEaWdpdHNUb0hhbmtha3UiLCJBcnJheSIsImZyb20iLCJtYXRjaEFsbCIsIm1hcCIsIm1hdGNoIiwieWVhciIsImdyb3VwcyIsIk1hdGgiLCJmbG9vciIsImdldEZ1bGxZZWFyIiwibm9ybWFsaXplWWVhciIsInBhcnNlSW50IiwiZmlsdGVyIiwiTnVtYmVyIiwiaXNOYU4iLCJnZXRUaW1lIiwiaXNJbnZhbGlkRGF0ZSIsImZpbmRBbGxZZWFyQW5kRGF5cyIsInRpbWVzIiwiZmluZEFsbFRpbWVzIiwibGVuZ3RoIiwic2V0SG91cnMiLCJlbmRUYXJnZXREYXRlIiwidGltZVJhbmdlIiwiZmluZFRpbWVSYW5nZSIsImVuZFRhcmdldFRpbWUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50RGV0YWlscyIsImV2ZW50UGFyYW1zIiwicGxhaW5UZXh0IiwiZGV0YWlscyIsImxpbmVzIiwic3BsaXQiLCJzbGljZSIsImpvaW4iLCJleHRyYWN0RXZlbnRUaXRsZUFuZERldGFpbHMiLCJkYXRlcyIsIm1lZXRpbmdVUkwiLCJ1cmxSZWdleCIsInJlZ2V4IiwiZXh0cmFjdE1lZXRpbmdVUkwiLCJsb2NhdGlvbiIsIm1ha2VHb29nbGVDYWxlbmRhckV2ZW50UGFyYW1zIiwiZXZlbnRVcmwiLCJldmVudCIsInVuZGVmaW5lZCIsInBhcmFtIiwid2luZG93Iiwib3BlbiJdLCJzb3VyY2VSb290IjoiIn0=