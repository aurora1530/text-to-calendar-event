(()=>{"use strict";const t=(t,e)=>`${t}=${encodeURIComponent(e)}`,e=t=>t.toISOString().replace(/-|:|\.\d+/g,""),r=(r,n={isAllday:!0,start:new Date})=>{if(n.isAllday){const a=e(n.start).replace(/T.*$/,"");return t(r,`${a}/${a}`)}const a=e(n.start),o=e(n.end);return t(r,`${a}/${o}`)},n=(t,e)=>({hour:t.hour+e.hour,minute:t.minute+e.minute}),a=(t,e)=>new Date(t.setHours(e.hour,e.minute)),o=t=>{const e=(t=>{const e=(t=>t.replace(/[０-９]/g,(t=>String.fromCharCode(t.charCodeAt(0)-65248))))(t).replace(/\s/g,"");return Array.from(e.matchAll(/(?:(?<year>\d{1,4}[\/年])?\s*(?<date>\d{1,2}(?:[\/-]\d{1,2}|\s?[\/月]\s?\d{1,2}日?)))/g)).map((t=>{const e=t.groups?.year?(t=>t<100?t+100*Math.floor((new Date).getFullYear()/100):t)(parseInt(t.groups.year.replace(/[\/年]/g,""))):(new Date).getFullYear(),r=t.groups?.date.replace(/\s|月|日/g,"/").replace(/[\/年]/g,"-");return new Date(`${e}-${r}`)})).filter((t=>!(t=>Number.isNaN(t.getTime()))(t)))})(t),r=(t=>Array.from(t.matchAll(/(?<hour>\d{1,2})[:時](?<minute>\d{2})?(?!間)/g)).map((t=>({hour:parseInt(t.groups?.hour??"0"),minute:parseInt(t.groups?.minute??"0")}))))(t);if(0===e.length)return{isAllday:!0,start:new Date};if(0===r.length)return{isAllday:!0,start:e[0]};const o=a(e[0],r[0]),s=e.length>1&&e[1].getTime()>e[0].getTime()?e[1]:e[0],u=(t=>{const e=t.match(/(?<hour>\d{1,2})時間(?<minute>(半|\d{1,2}分))?/);if(e&&e.groups?.hour)return{hour:parseInt(e.groups.hour),minute:"半"===e.groups?.minute?30:parseInt(e.groups?.minute??"0")}})(t),i=u?n(r[0],u):r.length>1?r[1]:n(r[0],{hour:1,minute:0});return{isAllday:!1,start:o,end:a(s,i)}};document?.getElementById("generateLink")?.addEventListener("click",(function(){const e=document.getElementById("eventDetails")?.value,n=(t=>{const{text:e,details:r}=(t=>{const e=t.split("\n");return{text:e[0],details:e.slice(1).join("\n")}})(t),n=o(t),a=(t=>{const e=[/https:\/\/(?:[a-zA-Z0-9-]+\.)?zoom\.us\/j\/[a-zA-Z0-9]+(?:\?pwd=[a-zA-Z0-9]+)?/,/https:\/\/meet\.google\.com\/[a-zA-Z0-9]{3}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{3}(?:\?[-a-zA-Z0-9=&]+)?/];for(const r of e){const e=t.match(r);if(e)return e[0]}})(t);return{text:e,details:r,dates:n,location:a}})(e),a=`https://calendar.google.com/calendar/render?action=TEMPLATE&${[t("text",(s=n).text),t("details",s.details),r("dates",s.dates),s.location?t("location",s.location):void 0].filter((t=>void 0!==t)).join("&")}`;var s;window.open(a,"_blank")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUN4QixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGV4dC10by1jYWxlbmRhci1ldmVudC8uL3NyYy9ldmVudC9jb25zdGFudC50cyIsIndlYnBhY2s6Ly90ZXh0LXRvLWNhbGVuZGFyLWV2ZW50Ly4vc3JjL2V2ZW50L2V2ZW50LnRzIiwid2VicGFjazovL3RleHQtdG8tY2FsZW5kYXItZXZlbnQvLi9zcmMvZXZlbnQvcGFyc2VyL2RhdGVzLnRzIiwid2VicGFjazovL3RleHQtdG8tY2FsZW5kYXItZXZlbnQvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vdGV4dC10by1jYWxlbmRhci1ldmVudC8uL3NyYy9ldmVudC9wYXJzZXIvbWFpbi50cyIsIndlYnBhY2s6Ly90ZXh0LXRvLWNhbGVuZGFyLWV2ZW50Ly4vc3JjL2V2ZW50L3BhcnNlci9sb2NhdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgRVZFTlRfUk9PVF9VUkwgPSBcImh0dHBzOi8vY2FsZW5kYXIuZ29vZ2xlLmNvbS9jYWxlbmRhci9yZW5kZXI/YWN0aW9uPVRFTVBMQVRFXCI7IiwiaW1wb3J0IHsgRVZFTlRfUk9PVF9VUkwgfSBmcm9tICcuL2NvbnN0YW50JztcblxuZXhwb3J0IHR5cGUgRXZlbnREYXRlcyA9XG4gIHwge1xuICAgICAgaXNBbGxkYXk6IGZhbHNlO1xuICAgICAgc3RhcnQ6IERhdGU7XG4gICAgICBlbmQ6IERhdGU7XG4gICAgfVxuICB8IHtcbiAgICAgIGlzQWxsZGF5OiB0cnVlO1xuICAgICAgc3RhcnQ6IERhdGU7XG4gICAgfTtcblxuZXhwb3J0IHR5cGUgR29vZ2xlQ2FsZW5kYXJFdmVudCA9IHtcbiAgdGV4dDogc3RyaW5nO1xuICBkZXRhaWxzOiBzdHJpbmc7XG4gIGRhdGVzPzogRXZlbnREYXRlcztcbiAgbG9jYXRpb24/OiBzdHJpbmc7XG59O1xuXG5jb25zdCBwYXJhbVRvVVJMUGFyYW0gPSAoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gYCR7a2V5fT0ke2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl9YDtcbn07XG5cbmNvbnN0IGRhdGVUb1JGQzU1NDUgPSAoZGF0ZTogRGF0ZSk6IHN0cmluZyA9PiB7XG4gIHJldHVybiBkYXRlLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvLXw6fFxcLlxcZCsvZywgJycpO1xufTtcblxuY29uc3QgZGF0ZVBhcmFtVG9VUkxQYXJhbSA9IChcbiAga2V5OiBzdHJpbmcsXG4gIGV2ZW50RGF0ZXM6IEV2ZW50RGF0ZXMgPSB7XG4gICAgaXNBbGxkYXk6IHRydWUsXG4gICAgc3RhcnQ6IG5ldyBEYXRlKCksXG4gIH1cbik6IHN0cmluZyA9PiB7XG4gIGlmKGV2ZW50RGF0ZXMuaXNBbGxkYXkpe1xuICAgIGNvbnN0IHRpbWUgPSBkYXRlVG9SRkM1NTQ1KGV2ZW50RGF0ZXMuc3RhcnQpLnJlcGxhY2UoL1QuKiQvLCAnJyk7XG4gICAgcmV0dXJuIHBhcmFtVG9VUkxQYXJhbShrZXksIGAke3RpbWV9LyR7dGltZX1gKTtcbiAgfVxuXG4gIGNvbnN0IHN0YXJ0ID0gZGF0ZVRvUkZDNTU0NShldmVudERhdGVzLnN0YXJ0KTtcbiAgY29uc3QgZW5kID0gZGF0ZVRvUkZDNTU0NShldmVudERhdGVzLmVuZCk7XG4gIHJldHVybiBwYXJhbVRvVVJMUGFyYW0oa2V5LCBgJHtzdGFydH0vJHtlbmR9YCk7XG59O1xuXG5leHBvcnQgY29uc3QgbWFrZUdvb2dsZUNhbGVuZGFyRXZlbnRVUkwgPSAoZXZlbnQ6IEdvb2dsZUNhbGVuZGFyRXZlbnQpOiBzdHJpbmcgPT4ge1xuICBjb25zdCBwYXJhbXMgPSBbXG4gICAgcGFyYW1Ub1VSTFBhcmFtKCd0ZXh0JywgZXZlbnQudGV4dCksXG4gICAgcGFyYW1Ub1VSTFBhcmFtKCdkZXRhaWxzJywgZXZlbnQuZGV0YWlscyksXG4gICAgZGF0ZVBhcmFtVG9VUkxQYXJhbSgnZGF0ZXMnLCBldmVudC5kYXRlcyksXG4gICAgZXZlbnQubG9jYXRpb24gPyBwYXJhbVRvVVJMUGFyYW0oJ2xvY2F0aW9uJywgZXZlbnQubG9jYXRpb24pIDogdW5kZWZpbmVkLFxuICBdLmZpbHRlcigocGFyYW0pID0+IHBhcmFtICE9PSB1bmRlZmluZWQpO1xuXG4gIHJldHVybiBgJHtFVkVOVF9ST09UX1VSTH0mJHtwYXJhbXMuam9pbignJicpfWA7XG59O1xuIiwiaW1wb3J0IHsgRXZlbnREYXRlcyB9IGZyb20gJy4uL2V2ZW50JztcblxuY29uc3QgemVua2FrdURpZ2l0c1RvSGFua2FrdSA9ICh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gdGV4dC5yZXBsYWNlKC9b77yQLe+8mV0vZywgKHMpID0+IHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShzLmNoYXJDb2RlQXQoMCkgLSAweGZlZTApO1xuICB9KTtcbn07XG5cbmNvbnN0IG5vcm1hbGl6ZVllYXIgPSAoeWVhcjogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgaWYgKHllYXIgPCAxMDApIHtcbiAgICBjb25zdCBjdXJyZW50Q2VudHVyeSA9IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRGdWxsWWVhcigpIC8gMTAwKSAqIDEwMDtcbiAgICByZXR1cm4geWVhciArIGN1cnJlbnRDZW50dXJ5O1xuICB9XG4gIHJldHVybiB5ZWFyO1xufTtcblxuY29uc3QgaXNJbnZhbGlkRGF0ZSA9IChkYXRlOiBEYXRlKTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiBOdW1iZXIuaXNOYU4oZGF0ZS5nZXRUaW1lKCkpO1xufTtcblxuY29uc3QgZmluZEFsbFllYXJBbmREYXlzID0gKHRleHQ6IHN0cmluZyk6IERhdGVbXSA9PiB7XG4gIGNvbnN0IG5vcm1hbGl6ZWRUZXh0ID0gemVua2FrdURpZ2l0c1RvSGFua2FrdSh0ZXh0KS5yZXBsYWNlKC9cXHMvZywgJycpO1xuICBjb25zdCBkYXRlUmVnZXggPVxuICAgIC8oPzooPzx5ZWFyPlxcZHsxLDR9W1xcL+W5tF0pP1xccyooPzxkYXRlPlxcZHsxLDJ9KD86W1xcLy1dXFxkezEsMn18XFxzP1tcXC/mnIhdXFxzP1xcZHsxLDJ95pelPykpKS9nO1xuICBjb25zdCBtYXRjaGVzID0gQXJyYXkuZnJvbShub3JtYWxpemVkVGV4dC5tYXRjaEFsbChkYXRlUmVnZXgpKTtcblxuICBjb25zdCBkYXRlcyA9IG1hdGNoZXMubWFwKChtYXRjaCkgPT4ge1xuICAgIGNvbnN0IHllYXIgPSBtYXRjaC5ncm91cHM/LnllYXJcbiAgICAgID8gbm9ybWFsaXplWWVhcihwYXJzZUludChtYXRjaC5ncm91cHMueWVhci5yZXBsYWNlKC9bXFwv5bm0XS9nLCAnJykpKVxuICAgICAgOiBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XG4gICAgY29uc3QgZGF0ZSA9IG1hdGNoLmdyb3Vwcz8uZGF0ZS5yZXBsYWNlKC9cXHN85pyIfOaXpS9nLCAnLycpLnJlcGxhY2UoL1tcXC/lubRdL2csICctJyk7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGAke3llYXJ9LSR7ZGF0ZX1gKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGRhdGVzLmZpbHRlcigoZGF0ZSkgPT4gIWlzSW52YWxpZERhdGUoZGF0ZSkpO1xufTtcblxudHlwZSBUaW1lID0ge1xuICBob3VyOiBudW1iZXI7XG4gIG1pbnV0ZTogbnVtYmVyO1xufTtcblxuY29uc3QgZmluZEFsbFRpbWVzID0gKHRleHQ6IHN0cmluZyk6IFRpbWVbXSA9PiB7XG4gIGNvbnN0IHRpbWVSZWdleCA9IC8oPzxob3VyPlxcZHsxLDJ9KVs65pmCXSg/PG1pbnV0ZT5cXGR7Mn0pPyg/IemWkykvZztcbiAgY29uc3QgbWF0Y2hlcyA9IEFycmF5LmZyb20odGV4dC5tYXRjaEFsbCh0aW1lUmVnZXgpKTtcblxuICBjb25zdCB0aW1lcyA9IG1hdGNoZXMubWFwKChtYXRjaCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBob3VyOiBwYXJzZUludChtYXRjaC5ncm91cHM/LmhvdXIgPz8gJzAnKSxcbiAgICAgIG1pbnV0ZTogcGFyc2VJbnQobWF0Y2guZ3JvdXBzPy5taW51dGUgPz8gJzAnKSxcbiAgICB9O1xuICB9KTtcblxuICByZXR1cm4gdGltZXM7XG59O1xuXG5jb25zdCBmaW5kVGltZVJhbmdlID0gKHRleHQ6IHN0cmluZyk6IFRpbWUgfCB1bmRlZmluZWQgPT4ge1xuICBjb25zdCB0aW1lUmVnZXggPSAvKD88aG91cj5cXGR7MSwyfSnmmYLplpMoPzxtaW51dGU+KOWNinxcXGR7MSwyfeWIhikpPy87XG4gIGNvbnN0IG1hdGNoID0gdGV4dC5tYXRjaCh0aW1lUmVnZXgpO1xuXG4gIGlmICghbWF0Y2ggfHwgIW1hdGNoLmdyb3Vwcz8uaG91cikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGhvdXIgPSBwYXJzZUludChtYXRjaC5ncm91cHMuaG91cik7XG4gIGNvbnN0IG1pbnV0ZSA9XG4gICAgbWF0Y2guZ3JvdXBzPy5taW51dGUgPT09ICfljYonID8gMzAgOiBwYXJzZUludChtYXRjaC5ncm91cHM/Lm1pbnV0ZSA/PyAnMCcpO1xuICByZXR1cm4geyBob3VyLCBtaW51dGUgfTtcbn07XG5cbmNvbnN0IGFkZFRpbWUgPSAoeDogVGltZSwgeTogVGltZSk6IFRpbWUgPT4ge1xuICByZXR1cm4ge1xuICAgIGhvdXI6IHguaG91ciArIHkuaG91cixcbiAgICBtaW51dGU6IHgubWludXRlICsgeS5taW51dGUsXG4gIH07XG59O1xuXG5jb25zdCBzZXRUaW1lVG9EYXRlID0gKGRhdGU6IERhdGUsIHRpbWU6IFRpbWUpOiBEYXRlID0+IHtcbiAgcmV0dXJuIG5ldyBEYXRlKGRhdGUuc2V0SG91cnModGltZS5ob3VyLCB0aW1lLm1pbnV0ZSkpO1xufTtcblxuZXhwb3J0IGNvbnN0IGV4dHJhY3RTdGFydEFuZEVuZERhdGVzID0gKHRleHQ6IHN0cmluZyk6IEV2ZW50RGF0ZXMgPT4ge1xuICBjb25zdCB5ZWFyQW5kRGF5cyA9IGZpbmRBbGxZZWFyQW5kRGF5cyh0ZXh0KTtcbiAgY29uc3QgdGltZXMgPSBmaW5kQWxsVGltZXModGV4dCk7XG5cbiAgaWYgKHllYXJBbmREYXlzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiB7XG4gICAgICBpc0FsbGRheTogdHJ1ZSxcbiAgICAgIHN0YXJ0OiBuZXcgRGF0ZSgpLFxuICAgIH07XG4gIH1cblxuICBpZiAodGltZXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzQWxsZGF5OiB0cnVlLFxuICAgICAgc3RhcnQ6IHllYXJBbmREYXlzWzBdLFxuICAgIH07XG4gIH1cblxuICAvLyBzdGFydOOBruaXpeS7mOOBq+aZguWIu+OCkuioreWumlxuICBjb25zdCBzdGFydCA9IHNldFRpbWVUb0RhdGUoeWVhckFuZERheXNbMF0sIHRpbWVzWzBdKTtcblxuICAvLyBlbmTjga7ml6Xku5jjgpLmjIflrprjgILmmYLliLvjgYzopIfmlbDjgYLjgovloLTlkIjjga/vvJLjgaTnm67jgpLjgIHjgarjgYTloLTlkIjjga/vvJHjgaTnm67vvIhzdGFydOOBqOWQjOOBmO+8ieOCkuS9v+OBhuOAglxuICAvLyDjgZ/jgaDjgZfjgIHvvJLjgaTnm67jga7ml6Xku5jjgYzvvJHjgaTnm67jgojjgorliY3jga7loLTlkIjjga/vvJHjgaTnm67jgpLkvb/jgYbjgIJcbiAgY29uc3QgZW5kVGFyZ2V0RGF0ZSA9XG4gICAgeWVhckFuZERheXMubGVuZ3RoID4gMSAmJiB5ZWFyQW5kRGF5c1sxXS5nZXRUaW1lKCkgPiB5ZWFyQW5kRGF5c1swXS5nZXRUaW1lKClcbiAgICAgID8geWVhckFuZERheXNbMV1cbiAgICAgIDogeWVhckFuZERheXNbMF07XG5cbiAgLy8g5omA6KaB5pmC6ZaT44GM5oyH5a6a44GV44KM44Gm44GE44KL5aC05ZCI44Gv44CBc3RhcnTjga7mmYLliLvjgavmiYDopoHmmYLplpPjgpLliqDnrpfjgZfjgaZlbmTjga7mmYLliLvjgpLoqK3lrppcbiAgLy8g5oyH5a6a44GV44KM44Gm44GE44Gq44GE5aC05ZCI44Gv44CB77yS44Gk55uu44Gu5pmC5Yi744G+44Gf44Gvc3RhcnTjga7mmYLliLvjgavvvJHmmYLplpPjgpLliqDnrpfjgZfjgaZlbmTjga7mmYLliLvjgpLoqK3lrppcbiAgY29uc3QgdGltZVJhbmdlID0gZmluZFRpbWVSYW5nZSh0ZXh0KTtcbiAgY29uc3QgZW5kVGFyZ2V0VGltZSA9IHRpbWVSYW5nZVxuICAgID8gYWRkVGltZSh0aW1lc1swXSwgdGltZVJhbmdlKVxuICAgIDogdGltZXMubGVuZ3RoID4gMVxuICAgID8gdGltZXNbMV1cbiAgICA6IGFkZFRpbWUodGltZXNbMF0sIHsgaG91cjogMSwgbWludXRlOiAwIH0pO1xuICBjb25zdCBlbmQgPSBzZXRUaW1lVG9EYXRlKGVuZFRhcmdldERhdGUsIGVuZFRhcmdldFRpbWUpO1xuXG4gIHJldHVybiB7XG4gICAgaXNBbGxkYXk6IGZhbHNlLFxuICAgIHN0YXJ0LFxuICAgIGVuZCxcbiAgfTtcbn07XG4iLCJpbXBvcnQgeyBtYWtlR29vZ2xlQ2FsZW5kYXJFdmVudFVSTCB9IGZyb20gXCIuL2V2ZW50L2V2ZW50XCJcbmltcG9ydCB7IG1ha2VHb29nbGVDYWxlbmRhckV2ZW50UGFyYW1zIH0gZnJvbSBcIi4vZXZlbnQvcGFyc2VyL21haW5cIlxuXG5cbmRvY3VtZW50Py5nZXRFbGVtZW50QnlJZCgnZ2VuZXJhdGVMaW5rJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICBjb25zdCBldmVudERldGFpbHMgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2ZW50RGV0YWlscycpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQpPy52YWx1ZTtcbiAgY29uc3QgZXZlbnRQYXJhbXMgPSBtYWtlR29vZ2xlQ2FsZW5kYXJFdmVudFBhcmFtcyhldmVudERldGFpbHMpO1xuICBjb25zdCBldmVudFVybCA9IG1ha2VHb29nbGVDYWxlbmRhckV2ZW50VVJMKGV2ZW50UGFyYW1zKTtcblxuICB3aW5kb3cub3BlbihldmVudFVybCwgJ19ibGFuaycpO1xufSk7IiwiaW1wb3J0IHsgRXZlbnREYXRlcywgR29vZ2xlQ2FsZW5kYXJFdmVudCwgbWFrZUdvb2dsZUNhbGVuZGFyRXZlbnRVUkwgfSBmcm9tICcuLi9ldmVudCc7XG5pbXBvcnQgeyBleHRyYWN0U3RhcnRBbmRFbmREYXRlcyB9IGZyb20gJy4vZGF0ZXMnO1xuaW1wb3J0IHsgZXh0cmFjdE1lZXRpbmdVUkwgfSBmcm9tICcuL2xvY2F0aW9uJztcblxuLyoqXG4gKiB0ZXh044GL44KJ44Kk44OZ44Oz44OI44K/44Kk44OI44Or44KS5oq95Ye644GZ44KL44CCXG4gKiDmnIDliJ3jga7ooYzjgpLjgqTjg5njg7Pjg4jjgr/jgqTjg4jjg6vjgajjgZfjgabmibHjgYbjgIJcbiAqL1xuY29uc3QgZXh0cmFjdEV2ZW50VGl0bGVBbmREZXRhaWxzID0gKFxuICB0ZXh0OiBzdHJpbmdcbik6IFBpY2s8R29vZ2xlQ2FsZW5kYXJFdmVudCwgJ3RleHQnIHwgJ2RldGFpbHMnPiA9PiB7XG4gIGNvbnN0IGxpbmVzID0gdGV4dC5zcGxpdCgnXFxuJyk7XG5cbiAgcmV0dXJuIHtcbiAgICB0ZXh0OiBsaW5lc1swXSxcbiAgICBkZXRhaWxzOiBsaW5lcy5zbGljZSgxKS5qb2luKCdcXG4nKSxcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBtYWtlR29vZ2xlQ2FsZW5kYXJFdmVudFBhcmFtcyA9IChwbGFpblRleHQ6IHN0cmluZyk6IEdvb2dsZUNhbGVuZGFyRXZlbnQgPT4ge1xuICBjb25zdCB7IHRleHQsIGRldGFpbHMgfSA9IGV4dHJhY3RFdmVudFRpdGxlQW5kRGV0YWlscyhwbGFpblRleHQpO1xuICBjb25zdCBkYXRlczogRXZlbnREYXRlcyA9IGV4dHJhY3RTdGFydEFuZEVuZERhdGVzKHBsYWluVGV4dCk7XG4gIGNvbnN0IG1lZXRpbmdVUkwgPSBleHRyYWN0TWVldGluZ1VSTChwbGFpblRleHQpO1xuXG4gIHJldHVybiB7XG4gICAgdGV4dCxcbiAgICBkZXRhaWxzLFxuICAgIGRhdGVzLFxuICAgIGxvY2F0aW9uOiBtZWV0aW5nVVJMLFxuICB9O1xufTsiLCJleHBvcnQgY29uc3QgZXh0cmFjdE1lZXRpbmdVUkwgPSAodGV4dDogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcbiAgY29uc3QgdXJsUmVnZXggPSBbXG4gICAgL2h0dHBzOlxcL1xcLyg/OlthLXpBLVowLTktXStcXC4pP3pvb21cXC51c1xcL2pcXC9bYS16QS1aMC05XSsoPzpcXD9wd2Q9W2EtekEtWjAtOV0rKT8vLCAvLyBab29tXG4gICAgL2h0dHBzOlxcL1xcL21lZXRcXC5nb29nbGVcXC5jb21cXC9bYS16QS1aMC05XXszfS1bYS16QS1aMC05XXs0fS1bYS16QS1aMC05XXszfSg/OlxcP1stYS16QS1aMC05PSZdKyk/LywgLy8gR29vZ2xlIE1lZXRcbiAgXTtcblxuICBmb3IgKGNvbnN0IHJlZ2V4IG9mIHVybFJlZ2V4KSB7XG4gICAgY29uc3QgbWF0Y2ggPSB0ZXh0Lm1hdGNoKHJlZ2V4KTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBtYXRjaFswXTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcbiJdLCJuYW1lcyI6WyJwYXJhbVRvVVJMUGFyYW0iLCJrZXkiLCJ2YWx1ZSIsImVuY29kZVVSSUNvbXBvbmVudCIsImRhdGVUb1JGQzU1NDUiLCJkYXRlIiwidG9JU09TdHJpbmciLCJyZXBsYWNlIiwiZGF0ZVBhcmFtVG9VUkxQYXJhbSIsImV2ZW50RGF0ZXMiLCJpc0FsbGRheSIsInN0YXJ0IiwiRGF0ZSIsInRpbWUiLCJlbmQiLCJhZGRUaW1lIiwieCIsInkiLCJob3VyIiwibWludXRlIiwic2V0VGltZVRvRGF0ZSIsInNldEhvdXJzIiwiZXh0cmFjdFN0YXJ0QW5kRW5kRGF0ZXMiLCJ0ZXh0IiwieWVhckFuZERheXMiLCJub3JtYWxpemVkVGV4dCIsInMiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJjaGFyQ29kZUF0IiwiemVua2FrdURpZ2l0c1RvSGFua2FrdSIsIkFycmF5IiwiZnJvbSIsIm1hdGNoQWxsIiwibWFwIiwibWF0Y2giLCJ5ZWFyIiwiZ3JvdXBzIiwiTWF0aCIsImZsb29yIiwiZ2V0RnVsbFllYXIiLCJub3JtYWxpemVZZWFyIiwicGFyc2VJbnQiLCJmaWx0ZXIiLCJOdW1iZXIiLCJpc05hTiIsImdldFRpbWUiLCJpc0ludmFsaWREYXRlIiwiZmluZEFsbFllYXJBbmREYXlzIiwidGltZXMiLCJmaW5kQWxsVGltZXMiLCJsZW5ndGgiLCJlbmRUYXJnZXREYXRlIiwidGltZVJhbmdlIiwiZmluZFRpbWVSYW5nZSIsImVuZFRhcmdldFRpbWUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50RGV0YWlscyIsImV2ZW50UGFyYW1zIiwicGxhaW5UZXh0IiwiZGV0YWlscyIsImxpbmVzIiwic3BsaXQiLCJzbGljZSIsImpvaW4iLCJleHRyYWN0RXZlbnRUaXRsZUFuZERldGFpbHMiLCJkYXRlcyIsIm1lZXRpbmdVUkwiLCJ1cmxSZWdleCIsInJlZ2V4IiwiZXh0cmFjdE1lZXRpbmdVUkwiLCJsb2NhdGlvbiIsIm1ha2VHb29nbGVDYWxlbmRhckV2ZW50UGFyYW1zIiwiZXZlbnRVcmwiLCJldmVudCIsInVuZGVmaW5lZCIsInBhcmFtIiwid2luZG93Iiwib3BlbiJdLCJzb3VyY2VSb290IjoiIn0=